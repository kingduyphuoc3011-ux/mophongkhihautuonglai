<!doctype html>
<html lang="vi" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Climate Change Simulator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 16px 24px;
      border-radius: 8px;
      color: white;
      font-weight: 600;
      z-index: 1000;
      animation: slideIn 0.3s ease;
    }

    .toast.success {
      background-color: #10b981;
    }

    .toast.error {
      background-color: #ef4444;
    }

    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="h-full">
  <div id="app" class="h-full w-full overflow-auto" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
   <header class="bg-white shadow-lg">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 text-center">
     <h1 id="main-title" class="text-4xl font-bold text-gray-900">MÃ´ phá»ng Biáº¿n Ä‘á»•i KhÃ­ háº­u</h1>
     <p id="main-subtitle" class="text-gray-600 mt-2">CÃ´ng cá»¥ mÃ´ phá»ng biáº¿n Ä‘á»•i khÃ­ háº­u tÆ°Æ¡ng tÃ¡c</p>
    </div>
   </header>
   <nav class="bg-white shadow-sm sticky top-0 z-10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
     <div class="flex space-x-4 overflow-x-auto py-4"><button id="tab-historical" class="px-4 py-2 text-blue-600 border-b-4 border-blue-600 font-semibold whitespace-nowrap"> ğŸ“Š Dá»¯ liá»‡u Lá»‹ch sá»­ </button> <button id="tab-simulation" class="px-4 py-2 text-gray-600 hover:text-gray-900 font-semibold whitespace-nowrap"> ğŸ›ï¸ MÃ´ phá»ng </button> <button id="tab-solutions" class="px-4 py-2 text-gray-600 hover:text-gray-900 font-semibold whitespace-nowrap"> ğŸ’¡ Giáº£i phÃ¡p </button> <button id="tab-timeline" class="px-4 py-2 text-gray-600 hover:text-gray-900 font-semibold whitespace-nowrap"> â±ï¸ DÃ²ng thá»i gian </button> <button id="tab-scenarios" class="px-4 py-2 text-gray-600 hover:text-gray-900 font-semibold whitespace-nowrap"> ğŸ“‹ Ká»‹ch báº£n ÄÃ£ lÆ°u </button> <button id="tab-compare" class="px-4 py-2 text-gray-600 hover:text-gray-900 font-semibold whitespace-nowrap"> ğŸ“ˆ So sÃ¡nh </button> <button id="tab-quiz" class="px-4 py-2 text-gray-600 hover:text-gray-900 font-semibold whitespace-nowrap"> ğŸ¯ Quiz </button> <button id="tab-dictionary" class="px-4 py-2 text-gray-600 hover:text-gray-900 font-semibold whitespace-nowrap"> ğŸ“– Tá»« Ä‘iá»ƒn </button> <button id="tab-feedback" class="px-4 py-2 text-gray-600 hover:text-gray-900 font-semibold whitespace-nowrap"> ğŸ”„ VÃ²ng pháº£n há»“i </button>
     </div>
    </div>
   </nav>
   <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><!-- Historical Tab -->
    <div id="content-historical" class="tab-content">
     <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
      <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ“Š Dá»¯ liá»‡u Lá»‹ch sá»­ NASA</h2>
      <p class="text-gray-600 mb-4">Biá»ƒu Ä‘á»“ nhiá»‡t Ä‘á»™ toÃ n cáº§u tá»« nÄƒm 1880 Ä‘áº¿n 2023</p>
      <div class="bg-gray-50 p-4 rounded-lg mb-6">
       <canvas id="historicalChart"></canvas>
      </div>
      <div class="grid md:grid-cols-3 gap-4">
       <div class="bg-red-50 p-4 rounded-lg border-2 border-red-200">
        <h3 class="font-bold text-lg mb-2">ğŸŒ¡ï¸ Nhiá»‡t Ä‘á»™ TÄƒng</h3>
        <p class="text-3xl font-bold text-red-600">+1.2Â°C</p>
        <p class="text-sm text-gray-600 mt-2">So vá»›i thá»i ká»³ tiá»n cÃ´ng nghiá»‡p (1850-1900)</p>
       </div>
       <div class="bg-orange-50 p-4 rounded-lg border-2 border-orange-200">
        <h3 class="font-bold text-lg mb-2">ğŸ’¨ Ná»“ng Ä‘á»™ COâ‚‚</h3>
        <p class="text-3xl font-bold text-orange-600">420 ppm</p>
        <p class="text-sm text-gray-600 mt-2">Cao nháº¥t trong 800,000 nÄƒm</p>
       </div>
       <div class="bg-blue-50 p-4 rounded-lg border-2 border-blue-200">
        <h3 class="font-bold text-lg mb-2">ğŸŒŠ Má»±c nÆ°á»›c biá»ƒn</h3>
        <p class="text-3xl font-bold text-blue-600">+20 cm</p>
        <p class="text-sm text-gray-600 mt-2">TÄƒng trung bÃ¬nh ká»ƒ tá»« 1880</p>
       </div>
      </div>
     </div>
    </div><!-- Simulation Tab -->
    <div id="content-simulation" class="tab-content hidden">
     <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
      <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ›ï¸ Äiá»u chá»‰nh ThÃ´ng sá»‘</h2>
      <div class="grid md:grid-cols-3 gap-6 mb-6">
       <div><label for="co2-rate" class="block text-sm font-semibold text-gray-700 mb-2">Tá»‘c Ä‘á»™ tÄƒng COâ‚‚ (%/nÄƒm)</label> <input type="number" id="co2-rate" step="0.1" value="0.5" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
       </div>
       <div><label for="temp-anomaly" class="block text-sm font-semibold text-gray-700 mb-2">Nhiá»‡t Ä‘á»™ hiá»‡n táº¡i (Â°C)</label> <input type="number" id="temp-anomaly" step="0.1" value="1.2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
       </div>
       <div><label for="ice-melt" class="block text-sm font-semibold text-gray-700 mb-2">Tá»‘c Ä‘á»™ bÄƒng tan (mm/nÄƒm)</label> <input type="number" id="ice-melt" step="0.1" value="3.3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
       </div>
      </div>
      <div class="bg-blue-50 border-l-4 border-blue-600 p-4 mb-6">
       <h3 class="text-lg font-bold text-blue-900 mb-3">ğŸ“ˆ Dá»± Ä‘oÃ¡n nÄƒm 2100</h3>
       <div class="grid md:grid-cols-3 gap-4 text-center">
        <div>
         <p class="text-sm text-blue-700 font-semibold">Nhiá»‡t Ä‘á»™</p>
         <p id="temp-2100" class="text-2xl font-bold text-blue-900">+2.5Â°C</p>
        </div>
        <div>
         <p class="text-sm text-blue-700 font-semibold">Má»±c nÆ°á»›c biá»ƒn</p>
         <p id="sea-level-2100" class="text-2xl font-bold text-blue-900">+300 mm</p>
        </div>
        <div>
         <p class="text-sm text-blue-700 font-semibold">COâ‚‚</p>
         <p id="co2-2100" class="text-2xl font-bold text-blue-900">550 ppm</p>
        </div>
       </div>
      </div>
      <div id="threat-level-box" class="border-l-4 p-4 mb-6 rounded-r-lg">
       <h3 class="text-lg font-bold mb-3">âš ï¸ Má»©c Ä‘á»™ Äe dá»a</h3>
       <div class="flex items-center gap-4 mb-3"><span id="threat-icon" class="text-4xl">ğŸŒ</span>
        <div>
         <p id="threat-level" class="text-2xl font-bold">Trung bÃ¬nh</p>
         <p id="threat-description" class="text-sm mt-1">TÃ¡c Ä‘á»™ng Ä‘Ã¡ng ká»ƒ Ä‘áº¿n há»‡ sinh thÃ¡i</p>
        </div>
       </div>
       <div id="threat-events" class="mt-4 space-y-2">
        <p class="text-sm font-semibold mb-2">Sá»± kiá»‡n cÃ³ thá»ƒ xáº£y ra:</p>
       </div>
      </div>
      <div class="bg-gray-50 p-4 rounded-lg mb-6">
       <canvas id="predictionChart"></canvas>
      </div>
      <div class="p-4 bg-green-50 border border-green-200 rounded-lg">
       <h3 class="text-lg font-semibold text-green-900 mb-3">ğŸ’¾ LÆ°u Ká»‹ch báº£n</h3>
       <div class="flex flex-wrap gap-3"><input type="text" id="scenario-name" placeholder="TÃªn ká»‹ch báº£n (tÃ¹y chá»n)" class="flex-1 min-w-64 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"> <button id="save-scenario" class="px-6 py-2 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition"> ğŸ’¾ LÆ°u ká»‹ch báº£n </button>
       </div>
       <div id="limit-warning" class="hidden mt-3 p-3 bg-red-100 border border-red-300 text-red-800 rounded-lg">
        âš ï¸ ÄÃ£ Ä‘áº¡t giá»›i háº¡n 999 ká»‹ch báº£n. Vui lÃ²ng xÃ³a bá»›t ká»‹ch báº£n cÅ©.
       </div>
      </div>
     </div>
    </div><!-- Solutions Tab -->
    <div id="content-solutions" class="tab-content hidden">
     <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
      <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ’¡ Giáº£i phÃ¡p Giáº£m PhÃ¡t tháº£i</h2>
      <p class="text-gray-600 mb-4">KÃ­ch hoáº¡t cÃ¡c giáº£i phÃ¡p vÃ  xem tÃ¡c Ä‘á»™ng Ä‘áº¿n khÃ­ háº­u</p>
      <div class="grid md:grid-cols-3 gap-4 mb-6">
       <div id="solution-renewable" class="p-4 bg-gray-50 rounded-lg border-2 border-gray-300 cursor-pointer hover:shadow-lg transition">
        <div class="flex items-center justify-between mb-2">
         <h3 class="font-bold text-lg">âš¡ NÄƒng lÆ°á»£ng TÃ¡i táº¡o</h3><span class="solution-status text-2xl">â­•</span>
        </div>
        <p class="text-sm text-gray-600 mb-2">Chuyá»ƒn Ä‘á»•i sang nÄƒng lÆ°á»£ng máº·t trá»i, giÃ³</p>
        <p class="text-green-600 font-semibold">Giáº£m: -0.3Â°C Ä‘áº¿n 2100</p>
       </div>
       <div id="solution-reforestation" class="p-4 bg-gray-50 rounded-lg border-2 border-gray-300 cursor-pointer hover:shadow-lg transition">
        <div class="flex items-center justify-between mb-2">
         <h3 class="font-bold text-lg">ğŸŒ³ Trá»“ng cÃ¢y</h3><span class="solution-status text-2xl">â­•</span>
        </div>
        <p class="text-sm text-gray-600 mb-2">Phá»¥c há»“i rá»«ng vÃ  háº¥p thá»¥ COâ‚‚</p>
        <p class="text-green-600 font-semibold">Giáº£m: -0.2Â°C Ä‘áº¿n 2100</p>
       </div>
       <div id="solution-electric" class="p-4 bg-gray-50 rounded-lg border-2 border-gray-300 cursor-pointer hover:shadow-lg transition">
        <div class="flex items-center justify-between mb-2">
         <h3 class="font-bold text-lg">ğŸš— Xe Äiá»‡n</h3><span class="solution-status text-2xl">â­•</span>
        </div>
        <p class="text-sm text-gray-600 mb-2">Chuyá»ƒn sang phÆ°Æ¡ng tiá»‡n sáº¡ch</p>
        <p class="text-green-600 font-semibold">Giáº£m: -0.15Â°C Ä‘áº¿n 2100</p>
       </div>
      </div>
      <div class="bg-blue-50 border-l-4 border-blue-600 p-4 mb-6">
       <h3 class="text-lg font-bold text-blue-900 mb-2">ğŸ“Š Tá»•ng tÃ¡c Ä‘á»™ng</h3>
       <p class="text-2xl font-bold text-blue-700">Giáº£m: <span id="total-impact">0.0</span>Â°C Ä‘áº¿n nÄƒm 2100</p>
       <p class="text-sm text-blue-800 mt-2">Nhiá»‡t Ä‘á»™ dá»± kiáº¿n: <span id="final-temp">+2.5</span>Â°C (thay vÃ¬ +2.5Â°C)</p>
      </div>
      <div class="bg-gray-50 p-4 rounded-lg">
       <h3 class="text-lg font-bold text-gray-800 mb-3">ğŸ“ˆ So sÃ¡nh Ká»‹ch báº£n</h3>
       <canvas id="solutionsChart"></canvas>
      </div>
     </div>
    </div><!-- Timeline Tab -->
    <div id="content-timeline" class="tab-content hidden">
     <div class="bg-white rounded-xl shadow-lg p-6">
      <h2 class="text-2xl font-bold text-gray-800 mb-4">â±ï¸ DÃ²ng thá»i gian KhÃ­ háº­u vá»›i Sá»± kiá»‡n Ngáº«u nhiÃªn</h2>
      <p class="text-gray-600 mb-4">Du hÃ nh qua thá»i gian tá»« 2024 Ä‘áº¿n 2100. Má»—i nÄƒm cÃ³ 30% cÆ¡ há»™i xáº£y ra sá»± kiá»‡n ngáº«u nhiÃªn!</p>
      <div class="text-center mb-6">
       <div class="text-6xl mb-4" id="timeline-icon">
        ğŸŒ
       </div>
       <p class="text-3xl font-bold text-blue-600 mb-2" id="timeline-year">NÄƒm 2024</p>
       <p class="text-xl text-gray-700 mb-1" id="timeline-temp">Nhiá»‡t Ä‘á»™: +1.2Â°C</p>
       <p class="text-lg text-gray-600" id="timeline-co2">COâ‚‚: 420 ppm</p>
       <div id="timeline-event" class="hidden mt-4 p-4 bg-yellow-50 border-2 border-yellow-400 rounded-lg">
        <p class="text-xl font-bold text-yellow-800 mb-2">âš ï¸ Sá»± kiá»‡n KhÃ­ háº­u!</p>
        <p class="text-yellow-900 font-semibold" id="event-description"></p>
        <p class="text-yellow-700 text-sm mt-2" id="event-impact"></p>
       </div>
      </div>
      <div class="flex justify-center gap-4 mb-4"><button id="timeline-prev" class="px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white font-bold rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed"> â¬…ï¸ NÄƒm trÆ°á»›c </button> <button id="timeline-next" class="px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg transition"> NÄƒm sau â¡ï¸ </button> <button id="timeline-reset" class="px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white font-bold rounded-lg transition"> ğŸ”„ Khá»Ÿi Ä‘á»™ng láº¡i </button>
      </div>
      <div class="bg-gray-100 rounded-lg p-4">
       <div class="flex items-center justify-between mb-2"><span class="text-sm font-semibold text-gray-700">Tiáº¿n trÃ¬nh:</span> <span class="text-sm font-semibold text-gray-700" id="timeline-progress">0 / 76 nÄƒm</span>
       </div>
       <div class="w-full bg-gray-300 rounded-full h-3">
        <div id="timeline-bar" class="bg-blue-600 h-3 rounded-full transition-all duration-300" style="width: 0%"></div>
       </div>
      </div>
     </div>
    </div><!-- Scenarios Tab -->
    <div id="content-scenarios" class="tab-content hidden">
     <div class="bg-white rounded-xl shadow-lg p-6">
      <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ“‹ Ká»‹ch báº£n ÄÃ£ lÆ°u</h2>
      <p class="text-gray-600 mb-6">Quáº£n lÃ½ cÃ¡c ká»‹ch báº£n báº¡n Ä‘Ã£ lÆ°u vÃ o Canva Sheet.</p>
      <div id="scenarios-list" class="space-y-4">
       <p class="text-center text-gray-500 py-8">ChÆ°a cÃ³ ká»‹ch báº£n nÃ o. HÃ£y táº¡o ká»‹ch báº£n má»›i á»Ÿ tab MÃ´ phá»ng!</p>
      </div>
     </div>
    </div><!-- Compare Tab -->
    <div id="content-compare" class="tab-content hidden">
     <div class="bg-white rounded-xl shadow-lg p-6">
      <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ“ˆ So sÃ¡nh Ká»‹ch báº£n</h2>
      <p class="text-gray-600 mb-4">So sÃ¡nh cÃ¡c ká»‹ch báº£n Ä‘Ã£ lÆ°u</p>
      <div class="text-center text-gray-500 py-12">
       Chá»n ká»‹ch báº£n á»Ÿ tab "Ká»‹ch báº£n ÄÃ£ lÆ°u" Ä‘á»ƒ so sÃ¡nh
      </div>
     </div>
    </div><!-- Dictionary Tab -->
    <div id="content-dictionary" class="tab-content hidden">
     <div class="bg-white rounded-xl shadow-lg p-6">
      <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ“– Tá»« Ä‘iá»ƒn Thuáº­t ngá»¯ KhÃ­ háº­u</h2>
      <p class="text-gray-600 mb-6">Giáº£i thÃ­ch cÃ¡c thuáº­t ngá»¯ khoa há»c Ä‘Æ°á»£c sá»­ dá»¥ng trong á»©ng dá»¥ng</p><!-- Search Box -->
      <div class="mb-6"><input type="text" id="dictionary-search" placeholder="ğŸ” TÃ¬m kiáº¿m thuáº­t ngá»¯..." class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
      </div><!-- Dictionary Terms -->
      <div id="dictionary-list" class="space-y-4"><!-- Terms will be rendered here -->
      </div>
     </div>
    </div><!-- Feedback Loops Tab -->
    <div id="content-feedback" class="tab-content hidden">
     <div class="bg-white rounded-xl shadow-lg p-6">
      <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ”„ VÃ²ng pháº£n há»“i KhÃ­ háº­u</h2>
      <p class="text-gray-600 mb-6">KhÃ¡m phÃ¡ cÃ¡c vÃ²ng pháº£n há»“i Ã¢m vÃ  dÆ°Æ¡ng áº£nh hÆ°á»Ÿng Ä‘áº¿n biáº¿n Ä‘á»•i khÃ­ háº­u</p><!-- Feedback Loop Type Selector -->
      <div class="flex gap-4 mb-6"><button id="show-positive" class="flex-1 px-6 py-3 bg-red-600 text-white font-bold rounded-lg transition hover:bg-red-700"> âš ï¸ Pháº£n há»“i DÆ°Æ¡ng (TÄƒng cÆ°á»ng) </button> <button id="show-negative" class="flex-1 px-6 py-3 bg-blue-600 text-white font-bold rounded-lg transition hover:bg-blue-700"> âœ… Pháº£n há»“i Ã‚m (á»”n Ä‘á»‹nh) </button>
      </div><!-- Feedback Loops Container -->
      <div id="feedback-loops-container"><!-- Loops will be rendered here -->
      </div>
     </div>
    </div><!-- Quiz Tab -->
    <div id="content-quiz" class="tab-content hidden">
     <div class="bg-white rounded-xl shadow-lg p-6">
      <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ¯ Quiz Kiáº¿n thá»©c KhÃ­ háº­u</h2>
      <p class="text-gray-600 mb-6">Kiá»ƒm tra kiáº¿n thá»©c cá»§a báº¡n vá» biáº¿n Ä‘á»•i khÃ­ háº­u</p><!-- Quiz Progress -->
      <div class="mb-6">
       <div class="flex justify-between items-center mb-2"><span class="text-sm font-semibold text-gray-700">Tiáº¿n Ä‘á»™: <span id="quiz-progress">0/10</span></span> <span class="text-sm font-semibold text-purple-700">Äiá»ƒm: <span id="quiz-score">0</span></span>
       </div>
       <div class="w-full bg-gray-300 rounded-full h-3">
        <div id="quiz-progress-bar" class="bg-purple-600 h-3 rounded-full transition-all duration-300" style="width: 0%"></div>
       </div>
      </div><!-- Quiz Question -->
      <div id="quiz-container" class="bg-purple-50 p-6 rounded-lg">
       <h3 id="quiz-question" class="text-lg font-bold mb-3">Äang táº£i cÃ¢u há»i...</h3>
       <div id="quiz-options" class="space-y-2"><!-- Options will be inserted here -->
       </div>
       <div id="quiz-feedback" class="hidden mt-4 p-4 rounded-lg">
        <p id="feedback-text" class="font-semibold mb-2"></p>
        <p id="feedback-explanation" class="text-sm"></p>
       </div>
      </div><!-- Quiz Result -->
      <div id="quiz-result" class="hidden mt-6 p-6 bg-gradient-to-r from-purple-100 to-blue-100 rounded-lg">
       <h3 class="text-2xl font-bold text-center mb-4">ğŸ‰ HoÃ n thÃ nh Quiz!</h3>
       <p class="text-center text-3xl font-bold text-purple-700 mb-4">Äiá»ƒm: <span id="final-score">0</span>/10</p>
       <div id="achievement-box" class="text-center mb-4">
        <p class="text-5xl mb-2" id="achievement-icon">ğŸ†</p>
        <p class="text-xl font-bold text-purple-800" id="achievement-title">Danh hiá»‡u</p>
        <p class="text-sm text-gray-700" id="achievement-desc">MÃ´ táº£ thÃ nh tÃ­ch</p>
       </div><button id="restart-quiz" class="w-full px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white font-bold rounded-lg transition"> ğŸ”„ LÃ m láº¡i Quiz </button>
      </div><!-- Next Button --> <button id="next-question" class="hidden w-full mt-4 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg transition"> CÃ¢u tiáº¿p theo â¡ï¸ </button>
     </div>
    </div>
   </main>
  </div>
  <script>
    const defaultConfig = {
      background_color: "#667eea",
      surface_color: "#ffffff",
      text_color: "#1f2937",
      primary_action_color: "#2563eb",
      secondary_action_color: "#10b981",
      font_family: "sans-serif",
      font_size: 16,
      app_title: "MÃ´ phá»ng Biáº¿n Ä‘á»•i KhÃ­ háº­u",
      app_subtitle: "CÃ´ng cá»¥ mÃ´ phá»ng biáº¿n Ä‘á»•i khÃ­ háº­u tÆ°Æ¡ng tÃ¡c"
    };

    let scenarios = [];
    let predictionChart;
    let historicalChart;
    let solutionsChart;
    
    // Timeline state
    let currentYear = 2024;
    let timelineTemp = 1.2;
    let timelineCO2 = 420;
    let yearEvents = {}; // Store events for each year
    
    // Solutions state
    let activeSolutions = {
      renewable: false,
      reforestation: false,
      electric: false
    };

    // Quiz state
    let currentQuestionIndex = 0;
    let quizScore = 0;
    let selectedAnswer = null;

    // Dictionary terms data
    const dictionaryTerms = [
      {
        term: "COâ‚‚ (Carbon Dioxide)",
        category: "KhÃ­ nhÃ  kÃ­nh",
        definition: "KhÃ­ carbon dioxide, lÃ  khÃ­ nhÃ  kÃ­nh chÃ­nh gÃ¢y ra hiá»‡u á»©ng nhÃ  kÃ­nh vÃ  biáº¿n Ä‘á»•i khÃ­ háº­u.",
        details: "COâ‚‚ Ä‘Æ°á»£c tháº£i ra tá»« viá»‡c Ä‘á»‘t nhiÃªn liá»‡u hÃ³a tháº¡ch, phÃ¡ rá»«ng vÃ  cÃ¡c hoáº¡t Ä‘á»™ng cÃ´ng nghiá»‡p. Ná»“ng Ä‘á»™ hiá»‡n táº¡i lÃ  420 ppm (parts per million), cao nháº¥t trong 800,000 nÄƒm qua.",
        icon: "ğŸ’¨"
      },
      {
        term: "ppm (Parts Per Million)",
        category: "ÄÆ¡n vá»‹ Ä‘o",
        definition: "ÄÆ¡n vá»‹ Ä‘o ná»“ng Ä‘á»™ khÃ­ trong khÃ­ quyá»ƒn, nghÄ©a lÃ  sá»‘ pháº§n trong má»™t triá»‡u pháº§n.",
        details: "VÃ­ dá»¥: 420 ppm COâ‚‚ cÃ³ nghÄ©a lÃ  trong 1 triá»‡u phÃ¢n tá»­ khÃ´ng khÃ­, cÃ³ 420 phÃ¢n tá»­ COâ‚‚.",
        icon: "ğŸ“Š"
      },
      {
        term: "Äá»™ lá»‡ch nhiá»‡t Ä‘á»™ (Temperature Anomaly)",
        category: "Nhiá»‡t Ä‘á»™",
        definition: "Sá»± chÃªnh lá»‡ch giá»¯a nhiá»‡t Ä‘á»™ hiá»‡n táº¡i vÃ  nhiá»‡t Ä‘á»™ trung bÃ¬nh trong thá»i ká»³ tham chiáº¿u.",
        details: "ThÆ°á»ng so sÃ¡nh vá»›i thá»i ká»³ tiá»n cÃ´ng nghiá»‡p (1850-1900). Äá»™ lá»‡ch +1.2Â°C nghÄ©a lÃ  TrÃ¡i Ä‘áº¥t nÃ³ng hÆ¡n 1.2Â°C so vá»›i thá»i ká»³ Ä‘Ã³.",
        icon: "ğŸŒ¡ï¸"
      },
      {
        term: "Hiá»‡u á»©ng nhÃ  kÃ­nh",
        category: "Hiá»‡n tÆ°á»£ng",
        definition: "Hiá»‡n tÆ°á»£ng cÃ¡c khÃ­ trong khÃ­ quyá»ƒn giá»¯ nhiá»‡t, lÃ m áº¥m bá» máº·t TrÃ¡i Ä‘áº¥t.",
        details: "Giá»‘ng nhÆ° má»™t chiáº¿c lá»u kÃ­nh, cÃ¡c khÃ­ nhÃ  kÃ­nh cho phÃ©p Ã¡nh sÃ¡ng máº·t trá»i Ä‘i qua nhÆ°ng giá»¯ láº¡i nhiá»‡t, lÃ m nÃ³ng hÃ nh tinh. ÄÃ¢y lÃ  hiá»‡n tÆ°á»£ng tá»± nhiÃªn, nhÆ°ng hoáº¡t Ä‘á»™ng con ngÆ°á»i Ä‘ang lÃ m tÄƒng cÆ°á»ng nÃ³.",
        icon: "ğŸ "
      },
      {
        term: "Thá»i ká»³ tiá»n cÃ´ng nghiá»‡p",
        category: "Lá»‹ch sá»­",
        definition: "Khoáº£ng thá»i gian trÆ°á»›c khi CÃ¡ch máº¡ng CÃ´ng nghiá»‡p báº¯t Ä‘áº§u (trÆ°á»›c nÄƒm 1850).",
        details: "ÄÆ°á»£c dÃ¹ng lÃ m má»‘c tham chiáº¿u Ä‘á»ƒ Ä‘o lÆ°á»ng tÃ¡c Ä‘á»™ng cá»§a con ngÆ°á»i Ä‘áº¿n khÃ­ háº­u. Thá»i ká»³ nÃ y khÃ­ háº­u cÃ²n tÆ°Æ¡ng Ä‘á»‘i á»•n Ä‘á»‹nh.",
        icon: "â°"
      },
      {
        term: "Hiá»‡p Ä‘á»‹nh Paris",
        category: "ChÃ­nh sÃ¡ch",
        definition: "Hiá»‡p Ä‘á»‹nh quá»‘c táº¿ vá» biáº¿n Ä‘á»•i khÃ­ háº­u Ä‘Æ°á»£c kÃ½ káº¿t nÄƒm 2015.",
        details: "Má»¥c tiÃªu: Giá»¯ má»©c tÄƒng nhiá»‡t Ä‘á»™ toÃ n cáº§u dÆ°á»›i 2Â°C, tá»‘t nháº¥t lÃ  1.5Â°C so vá»›i thá»i ká»³ tiá»n cÃ´ng nghiá»‡p. 196 quá»‘c gia Ä‘Ã£ tham gia.",
        icon: "ğŸ“œ"
      },
      {
        term: "Má»±c nÆ°á»›c biá»ƒn dÃ¢ng",
        category: "TÃ¡c Ä‘á»™ng",
        definition: "Hiá»‡n tÆ°á»£ng má»±c nÆ°á»›c biá»ƒn toÃ n cáº§u tÄƒng cao do bÄƒng tan vÃ  nÆ°á»›c nÃ³ng giÃ£n ná»Ÿ.",
        details: "Tá»« nÄƒm 1880, má»±c nÆ°á»›c biá»ƒn Ä‘Ã£ dÃ¢ng trung bÃ¬nh 20cm. Dá»± Ä‘oÃ¡n cÃ³ thá»ƒ dÃ¢ng thÃªm 30-100cm vÃ o nÄƒm 2100, Ä‘e dá»a cÃ¡c thÃ nh phá»‘ ven biá»ƒn.",
        icon: "ğŸŒŠ"
      },
      {
        term: "BÄƒng tan cá»±c",
        category: "TÃ¡c Ä‘á»™ng",
        definition: "Hiá»‡n tÆ°á»£ng bÄƒng á»Ÿ Báº¯c Cá»±c vÃ  Nam Cá»±c tan cháº£y do nhiá»‡t Ä‘á»™ tÄƒng.",
        details: "BÄƒng tan lÃ m giáº£m hiá»‡u á»©ng pháº£n chiáº¿u (albedo), khiáº¿n TrÃ¡i Ä‘áº¥t háº¥p thá»¥ nhiá»u nhiá»‡t hÆ¡n, táº¡o vÃ²ng láº·p pháº£n há»“i dÆ°Æ¡ng. CÃ¹ng Ä‘Ã³ng gÃ³p vÃ o má»±c nÆ°á»›c biá»ƒn dÃ¢ng.",
        icon: "ğŸ§Š"
      },
      {
        term: "Hiá»‡u á»©ng Albedo",
        category: "Hiá»‡n tÆ°á»£ng",
        definition: "Kháº£ nÄƒng pháº£n chiáº¿u Ã¡nh sÃ¡ng máº·t trá»i cá»§a bá» máº·t TrÃ¡i Ä‘áº¥t.",
        details: "BÄƒng vÃ  tuyáº¿t cÃ³ albedo cao (pháº£n chiáº¿u nhiá»u Ã¡nh sÃ¡ng), cÃ²n Ä‘áº¡i dÆ°Æ¡ng vÃ  Ä‘áº¥t cÃ³ albedo tháº¥p (háº¥p thá»¥ nhiá»u nhiá»‡t). Khi bÄƒng tan, albedo giáº£m, TrÃ¡i Ä‘áº¥t háº¥p thá»¥ nhiá»u nhiá»‡t hÆ¡n.",
        icon: "â˜€ï¸"
      },
      {
        term: "NÄƒng lÆ°á»£ng tÃ¡i táº¡o",
        category: "Giáº£i phÃ¡p",
        definition: "NÄƒng lÆ°á»£ng tá»« cÃ¡c nguá»“n tá»± nhiÃªn cÃ³ thá»ƒ tÃ¡i táº¡o nhÆ° máº·t trá»i, giÃ³, nÆ°á»›c.",
        details: "KhÃ´ng tháº£i COâ‚‚ trong quÃ¡ trÃ¬nh sá»­ dá»¥ng. Bao gá»“m: nÄƒng lÆ°á»£ng máº·t trá»i, giÃ³, thá»§y Ä‘iá»‡n, Ä‘á»‹a nhiá»‡t, sinh khá»‘i. LÃ  giáº£i phÃ¡p quan trá»ng Ä‘á»ƒ giáº£m phÃ¡t tháº£i.",
        icon: "âš¡"
      },
      {
        term: "PhÃ¡ rá»«ng (Deforestation)",
        category: "NguyÃªn nhÃ¢n",
        definition: "Viá»‡c cháº·t phÃ¡ rá»«ng Ä‘á»ƒ láº¥y Ä‘áº¥t trá»“ng trá»t, chÄƒn nuÃ´i hoáº·c xÃ¢y dá»±ng.",
        details: "Rá»«ng háº¥p thá»¥ COâ‚‚ qua quÃ¡ trÃ¬nh quang há»£p. Khi bá»‹ cháº·t phÃ¡, COâ‚‚ bá»‹ giáº£i phÃ³ng trá»Ÿ láº¡i khÃ­ quyá»ƒn, Ä‘á»“ng thá»i máº¥t Ä‘i 'bá»ƒ chá»©a carbon' tá»± nhiÃªn.",
        icon: "ğŸŒ³"
      },
      {
        term: "Trá»“ng cÃ¢y (Reforestation)",
        category: "Giáº£i phÃ¡p",
        definition: "Viá»‡c trá»“ng cÃ¢y Ä‘á»ƒ phá»¥c há»“i cÃ¡c khu rá»«ng Ä‘Ã£ bá»‹ phÃ¡.",
        details: "CÃ¢y xanh háº¥p thá»¥ COâ‚‚ tá»« khÃ­ quyá»ƒn qua quÃ¡ trÃ¬nh quang há»£p, giÃºp giáº£m ná»“ng Ä‘á»™ khÃ­ nhÃ  kÃ­nh. CÅ©ng giÃºp báº£o vá»‡ Ä‘a dáº¡ng sinh há»c vÃ  Ä‘iá»u hÃ²a khÃ­ háº­u Ä‘á»‹a phÆ°Æ¡ng.",
        icon: "ğŸŒ±"
      },
      {
        term: "NhiÃªn liá»‡u hÃ³a tháº¡ch",
        category: "NguyÃªn nhÃ¢n",
        definition: "CÃ¡c nhiÃªn liá»‡u nhÆ° than Ä‘Ã¡, dáº§u má», khÃ­ Ä‘á»‘t tá»± nhiÃªn Ä‘Æ°á»£c hÃ¬nh thÃ nh tá»« sinh váº­t cá»• Ä‘áº¡i.",
        details: "Khi Ä‘á»‘t chÃ¡y, nhiÃªn liá»‡u hÃ³a tháº¡ch giáº£i phÃ³ng COâ‚‚ Ä‘Ã£ bá»‹ 'giam giá»¯' hÃ ng triá»‡u nÄƒm. LÃ  nguá»“n phÃ¡t tháº£i COâ‚‚ lá»›n nháº¥t cá»§a con ngÆ°á»i, chiáº¿m khoáº£ng 75% tá»•ng phÃ¡t tháº£i.",
        icon: "ğŸ›¢ï¸"
      },
      {
        term: "Xe Ä‘iá»‡n (Electric Vehicles)",
        category: "Giáº£i phÃ¡p",
        definition: "PhÆ°Æ¡ng tiá»‡n giao thÃ´ng sá»­ dá»¥ng Ä‘á»™ng cÆ¡ Ä‘iá»‡n thay vÃ¬ Ä‘á»™ng cÆ¡ Ä‘á»‘t trong.",
        details: "KhÃ´ng tháº£i COâ‚‚ trá»±c tiáº¿p khi váº­n hÃ nh. Náº¿u sáº¡c báº±ng nÄƒng lÆ°á»£ng tÃ¡i táº¡o, cÃ³ thá»ƒ giáº£m phÃ¡t tháº£i gáº§n 100% so vá»›i xe xÄƒng. LÃ  giáº£i phÃ¡p quan trá»ng cho giao thÃ´ng xanh.",
        icon: "ğŸš—"
      },
      {
        term: "BÃ£o nhiá»‡t Ä‘á»›i",
        category: "TÃ¡c Ä‘á»™ng",
        definition: "Há»‡ thá»‘ng bÃ£o máº¡nh hÃ¬nh thÃ nh trÃªn biá»ƒn nhiá»‡t Ä‘á»›i vá»›i giÃ³ xoÃ¡y vÃ  mÆ°a lá»›n.",
        details: "Biáº¿n Ä‘á»•i khÃ­ háº­u lÃ m bÃ£o máº¡nh hÆ¡n do nhiá»‡t Ä‘á»™ nÆ°á»›c biá»ƒn tÄƒng cung cáº¥p nhiá»u nÄƒng lÆ°á»£ng hÆ¡n. Táº§n suáº¥t bÃ£o cáº¥p 4-5 Ä‘ang gia tÄƒng.",
        icon: "ğŸŒ€"
      },
      {
        term: "ChÃ¡y rá»«ng",
        category: "TÃ¡c Ä‘á»™ng",
        definition: "ÄÃ¡m chÃ¡y lan rá»™ng trÃªn diá»‡n tÃ­ch rá»«ng lá»›n, thÆ°á»ng do thá»i tiáº¿t khÃ´ háº¡n.",
        details: "Biáº¿n Ä‘á»•i khÃ­ háº­u lÃ m tÄƒng nguy cÆ¡ chÃ¡y rá»«ng do nhiá»‡t Ä‘á»™ cao vÃ  háº¡n hÃ¡n. ChÃ¡y rá»«ng giáº£i phÃ³ng lÆ°á»£ng COâ‚‚ khá»•ng lá»“, táº¡o vÃ²ng láº·p pháº£n há»“i nguy hiá»ƒm.",
        icon: "ğŸ”¥"
      },
      {
        term: "Háº¡n hÃ¡n",
        category: "TÃ¡c Ä‘á»™ng",
        definition: "Thá»i ká»³ kÃ©o dÃ i thiáº¿u mÆ°a vÃ  khan hiáº¿m nÆ°á»›c.",
        details: "Biáº¿n Ä‘á»•i khÃ­ háº­u lÃ m thay Ä‘á»•i mÃ´ hÃ¬nh mÆ°a, gÃ¢y háº¡n hÃ¡n kÃ©o dÃ i á»Ÿ nhiá»u khu vá»±c. áº¢nh hÆ°á»Ÿng nghiÃªm trá»ng Ä‘áº¿n nÃ´ng nghiá»‡p, nguá»“n nÆ°á»›c vÃ  sinh thÃ¡i.",
        icon: "ğŸœï¸"
      },
      {
        term: "Táº©y tráº¯ng san hÃ´",
        category: "TÃ¡c Ä‘á»™ng",
        definition: "Hiá»‡n tÆ°á»£ng san hÃ´ máº¥t mÃ u vÃ  cháº¿t do nÆ°á»›c biá»ƒn nÃ³ng lÃªn.",
        details: "San hÃ´ sá»‘ng cá»™ng sinh vá»›i táº£o (algae) táº¡o mÃ u sáº¯c. Khi nÆ°á»›c quÃ¡ nÃ³ng, san hÃ´ Ä‘uá»•i táº£o Ä‘i, trá»Ÿ nÃªn tráº¯ng vÃ  cháº¿t. Ráº¡n san hÃ´ lÃ  nhÃ  cá»§a 25% sinh váº­t biá»ƒn.",
        icon: "ğŸ "
      },
      {
        term: "Äiá»ƒm khÃ´ng thá»ƒ quay láº¡i (Tipping Point)",
        category: "Hiá»‡n tÆ°á»£ng",
        definition: "NgÆ°á»¡ng mÃ  khi vÆ°á»£t qua, thay Ä‘á»•i khÃ­ háº­u trá»Ÿ nÃªn khÃ´ng thá»ƒ Ä‘áº£o ngÆ°á»£c.",
        details: "VÃ­ dá»¥: BÄƒng Greenland tan hoÃ n toÃ n, dÃ²ng háº£i lÆ°u Atlantic Ä‘á»•i chiá»u, rá»«ng Amazon chuyá»ƒn thÃ nh tháº£o nguyÃªn. Má»™t khi Ä‘áº¡t Ä‘iá»ƒm nÃ y, quÃ¡ trÃ¬nh tá»± tiáº¿p diá»…n khÃ´ng cáº§n thÃªm phÃ¡t tháº£i.",
        icon: "âš ï¸"
      },
      {
        term: "VÃ²ng láº·p pháº£n há»“i dÆ°Æ¡ng",
        category: "Hiá»‡n tÆ°á»£ng",
        definition: "QuÃ¡ trÃ¬nh mÃ  sá»± thay Ä‘á»•i ban Ä‘áº§u táº¡o ra hiá»‡u á»©ng tá»± cá»§ng cá»‘, lÃ m thay Ä‘á»•i cÃ ng máº¡nh hÆ¡n.",
        details: "VÃ­ dá»¥: BÄƒng tan â†’ Albedo giáº£m â†’ Háº¥p thá»¥ nhiá»u nhiá»‡t â†’ BÄƒng tan nhiá»u hÆ¡n. Hoáº·c: NÃ³ng lÃªn â†’ Rá»«ng chÃ¡y â†’ Tháº£i COâ‚‚ â†’ NÃ³ng lÃªn hÆ¡n.",
        icon: "ğŸ”„"
      },
      {
        term: "VÃ²ng láº·p pháº£n há»“i Ã¢m",
        category: "Hiá»‡n tÆ°á»£ng",
        definition: "QuÃ¡ trÃ¬nh tá»± Ä‘iá»u chá»‰nh giÃºp giáº£m bá»›t sá»± thay Ä‘á»•i ban Ä‘áº§u, táº¡o sá»± á»•n Ä‘á»‹nh cho há»‡ thá»‘ng.",
        details: "VÃ­ dá»¥: Nhiá»‡t Ä‘á»™ tÄƒng â†’ MÃ¢y tÄƒng â†’ Pháº£n chiáº¿u Ã¡nh sÃ¡ng máº·t trá»i â†’ Nhiá»‡t Ä‘á»™ giáº£m. Hoáº·c: COâ‚‚ tÄƒng â†’ CÃ¢y phÃ¡t triá»ƒn nhanh hÆ¡n â†’ Háº¥p thá»¥ nhiá»u COâ‚‚ â†’ COâ‚‚ giáº£m. Pháº£n há»“i Ã¢m giÃºp Ä‘iá»u hÃ²a khÃ­ háº­u nhÆ°ng cÃ³ giá»›i háº¡n.",
        icon: "âš–ï¸"
      },
      {
        term: "KhÃ­ metan (CHâ‚„)",
        category: "KhÃ­ nhÃ  kÃ­nh",
        definition: "KhÃ­ nhÃ  kÃ­nh máº¡nh gáº¥p 25 láº§n COâ‚‚ trong viá»‡c giá»¯ nhiá»‡t.",
        details: "ÄÆ°á»£c tháº£i ra tá»« chÄƒn nuÃ´i gia sÃºc, ruá»™ng lÃºa, bÃ£i rÃ¡c, vÃ  khai thÃ¡c khÃ­ Ä‘á»‘t. Tuy Ã­t hÆ¡n COâ‚‚ nhÆ°ng tÃ¡c Ä‘á»™ng máº¡nh hÆ¡n nhiá»u.",
        icon: "ğŸ„"
      },
      {
        term: "Bá»ƒ chá»©a carbon (Carbon Sink)",
        category: "Hiá»‡n tÆ°á»£ng",
        definition: "Há»‡ thá»‘ng tá»± nhiÃªn háº¥p thá»¥ vÃ  lÆ°u trá»¯ COâ‚‚ tá»« khÃ­ quyá»ƒn.",
        details: "CÃ¡c bá»ƒ chá»©a carbon chÃ­nh: Rá»«ng (cÃ¢y xanh), Ä‘áº¡i dÆ°Æ¡ng (nÆ°á»›c biá»ƒn háº¥p thá»¥ COâ‚‚), Ä‘áº¥t (cháº¥t há»¯u cÆ¡). Báº£o vá»‡ cÃ¡c bá»ƒ chá»©a nÃ y ráº¥t quan trá»ng Ä‘á»ƒ giáº£m COâ‚‚.",
        icon: "ğŸ "
      },
      {
        term: "PhÃ¡t tháº£i rÃ²ng báº±ng 0 (Net Zero)",
        category: "Má»¥c tiÃªu",
        definition: "Tráº¡ng thÃ¡i cÃ¢n báº±ng giá»¯a lÆ°á»£ng COâ‚‚ tháº£i ra vÃ  lÆ°á»£ng COâ‚‚ Ä‘Æ°á»£c háº¥p thá»¥.",
        details: "Má»¥c tiÃªu toÃ n cáº§u Ä‘á»ƒ ngÄƒn cháº·n biáº¿n Ä‘á»•i khÃ­ háº­u. Nhiá»u quá»‘c gia cam káº¿t Ä‘áº¡t net zero vÃ o nÄƒm 2050-2060. Cáº§n giáº£m phÃ¡t tháº£i vÃ  tÄƒng háº¥p thá»¥ COâ‚‚.",
        icon: "ğŸ¯"
      },
      {
        term: "Sa máº¡c hÃ³a",
        category: "TÃ¡c Ä‘á»™ng",
        definition: "QuÃ¡ trÃ¬nh Ä‘áº¥t mÃ u má»¡ trá»Ÿ thÃ nh sa máº¡c do háº¡n hÃ¡n vÃ  sá»­ dá»¥ng Ä‘áº¥t khÃ´ng bá»n vá»¯ng.",
        details: "Biáº¿n Ä‘á»•i khÃ­ háº­u tÄƒng cÆ°á»ng sa máº¡c hÃ³a thÃ´ng qua háº¡n hÃ¡n kÃ©o dÃ i vÃ  nhiá»‡t Ä‘á»™ cao. áº¢nh hÆ°á»Ÿng Ä‘áº¿n hÃ ng triá»‡u ngÆ°á»i á»Ÿ chÃ¢u Phi, chÃ¢u Ã vÃ  Trung ÄÃ´ng.",
        icon: "ğŸœï¸"
      }
    ];

    const quizQuestions = [
      {
        question: "Ná»“ng Ä‘á»™ COâ‚‚ trong khÃ­ quyá»ƒn hiá»‡n táº¡i lÃ  bao nhiÃªu?",
        options: ["280 ppm", "350 ppm", "420 ppm", "500 ppm"],
        correct: 2,
        explanation: "Ná»“ng Ä‘á»™ COâ‚‚ hiá»‡n táº¡i lÃ  420 ppm, cao nháº¥t trong 800,000 nÄƒm qua."
      },
      {
        question: "Nhiá»‡t Ä‘á»™ trung bÃ¬nh toÃ n cáº§u Ä‘Ã£ tÄƒng bao nhiÃªu ká»ƒ tá»« thá»i ká»³ tiá»n cÃ´ng nghiá»‡p?",
        options: ["+0.5Â°C", "+1.2Â°C", "+2.0Â°C", "+3.5Â°C"],
        correct: 1,
        explanation: "Nhiá»‡t Ä‘á»™ trÃ¡i Ä‘áº¥t Ä‘Ã£ tÄƒng khoáº£ng 1.2Â°C so vá»›i thá»i ká»³ tiá»n cÃ´ng nghiá»‡p (1850-1900)."
      },
      {
        question: "Hiá»‡p Ä‘á»‹nh Paris Ä‘áº·t má»¥c tiÃªu giá»›i háº¡n má»©c tÄƒng nhiá»‡t Ä‘á»™ toÃ n cáº§u á»Ÿ má»©c nÃ o?",
        options: ["DÆ°á»›i 1.5Â°C", "DÆ°á»›i 2Â°C", "DÆ°á»›i 3Â°C", "DÆ°á»›i 5Â°C"],
        correct: 1,
        explanation: "Hiá»‡p Ä‘á»‹nh Paris nháº±m giá»¯ má»©c tÄƒng nhiá»‡t Ä‘á»™ dÆ°á»›i 2Â°C, tá»‘t nháº¥t lÃ  1.5Â°C."
      },
      {
        question: "Nguá»“n nÄƒng lÆ°á»£ng nÃ o sau Ä‘Ã¢y khÃ´ng tháº£i ra khÃ­ nhÃ  kÃ­nh?",
        options: ["Than Ä‘Ã¡", "KhÃ­ Ä‘á»‘t tá»± nhiÃªn", "NÄƒng lÆ°á»£ng máº·t trá»i", "Dáº§u má»"],
        correct: 2,
        explanation: "NÄƒng lÆ°á»£ng máº·t trá»i lÃ  nÄƒng lÆ°á»£ng tÃ¡i táº¡o sáº¡ch, khÃ´ng tháº£i COâ‚‚."
      },
      {
        question: "Má»±c nÆ°á»›c biá»ƒn Ä‘Ã£ dÃ¢ng cao bao nhiÃªu ká»ƒ tá»« nÄƒm 1880?",
        options: ["+5 cm", "+20 cm", "+50 cm", "+100 cm"],
        correct: 1,
        explanation: "Má»±c nÆ°á»›c biá»ƒn Ä‘Ã£ tÄƒng trung bÃ¬nh 20 cm ká»ƒ tá»« nÄƒm 1880 vÃ  Ä‘ang tÄƒng nhanh hÆ¡n."
      },
      {
        question: "KhÃ­ nhÃ  kÃ­nh nÃ o cÃ³ tÃ¡c Ä‘á»™ng máº¡nh nháº¥t Ä‘áº¿n biáº¿n Ä‘á»•i khÃ­ háº­u?",
        options: ["Oxy (Oâ‚‚)", "Carbon Dioxide (COâ‚‚)", "Nitrogen (Nâ‚‚)", "Hydro (Hâ‚‚)"],
        correct: 1,
        explanation: "COâ‚‚ lÃ  khÃ­ nhÃ  kÃ­nh chÃ­nh gÃ¢y ra hiá»‡u á»©ng nhÃ  kÃ­nh vÃ  biáº¿n Ä‘á»•i khÃ­ háº­u."
      },
      {
        question: "Hoáº¡t Ä‘á»™ng nÃ o sau Ä‘Ã¢y gÃ³p pháº§n lá»›n nháº¥t vÃ o phÃ¡t tháº£i COâ‚‚?",
        options: ["Trá»“ng trá»t", "Äá»‘t nhiÃªn liá»‡u hÃ³a tháº¡ch", "ChÄƒn nuÃ´i", "XÃ¢y dá»±ng"],
        correct: 1,
        explanation: "Äá»‘t nhiÃªn liá»‡u hÃ³a tháº¡ch (than, dáº§u, khÃ­ Ä‘á»‘t) lÃ  nguá»“n phÃ¡t tháº£i COâ‚‚ lá»›n nháº¥t."
      },
      {
        question: "Rá»«ng Amazon Ä‘Ã³ng vai trÃ² gÃ¬ trong viá»‡c Ä‘iá»u hÃ²a khÃ­ háº­u?",
        options: ["Tháº£i COâ‚‚", "Háº¥p thá»¥ COâ‚‚", "Táº¡o ra khÃ­ metan", "KhÃ´ng cÃ³ tÃ¡c Ä‘á»™ng"],
        correct: 1,
        explanation: "Rá»«ng Amazon háº¥p thá»¥ hÃ ng tá»· táº¥n COâ‚‚, Ä‘Æ°á»£c gá»i lÃ  'lÃ¡ phá»•i cá»§a TrÃ¡i Ä‘áº¥t'."
      },
      {
        question: "Hiá»‡n tÆ°á»£ng nÃ o sau Ä‘Ã¢y KHÃ”NG pháº£i lÃ  háº­u quáº£ cá»§a biáº¿n Ä‘á»•i khÃ­ háº­u?",
        options: ["BÄƒng tan á»Ÿ hai cá»±c", "BÃ£o nhiá»‡t Ä‘á»›i máº¡nh hÆ¡n", "Äá»™ng Ä‘áº¥t tÄƒng", "Má»±c nÆ°á»›c biá»ƒn dÃ¢ng"],
        correct: 2,
        explanation: "Äá»™ng Ä‘áº¥t khÃ´ng liÃªn quan Ä‘áº¿n biáº¿n Ä‘á»•i khÃ­ háº­u, nÃ³ do hoáº¡t Ä‘á»™ng kiáº¿n táº¡o máº£ng."
      },
      {
        question: "Giáº£i phÃ¡p nÃ o sau Ä‘Ã¢y giÃºp giáº£m phÃ¡t tháº£i COâ‚‚ hiá»‡u quáº£ nháº¥t?",
        options: ["Chuyá»ƒn sang xe Ä‘iá»‡n", "Trá»“ng cÃ¢y", "NÄƒng lÆ°á»£ng tÃ¡i táº¡o", "Táº¥t cáº£ Ä‘á»u quan trá»ng"],
        correct: 3,
        explanation: "Táº¥t cáº£ cÃ¡c giáº£i phÃ¡p Ä‘á»u quan trá»ng vÃ  cáº§n káº¿t há»£p Ä‘á»ƒ Ä‘á»‘i phÃ³ vá»›i biáº¿n Ä‘á»•i khÃ­ háº­u."
      }
    ];

    // Feedback loops data
    const positiveFeedbackLoops = [
      {
        name: "Hiá»‡u á»©ng Albedo - BÄƒng tan",
        icon: "ğŸ§Š",
        steps: [
          { text: "Nhiá»‡t Ä‘á»™ tÄƒng", icon: "ğŸŒ¡ï¸", color: "bg-red-100" },
          { text: "BÄƒng cá»±c vÃ  tuyáº¿t tan", icon: "â„ï¸", color: "bg-blue-100" },
          { text: "Bá» máº·t tá»‘i mÃ u lá»™ ra", icon: "ğŸŒ‘", color: "bg-gray-700 text-white" },
          { text: "Háº¥p thá»¥ nhiá»u Ã¡nh sÃ¡ng máº·t trá»i", icon: "â˜€ï¸", color: "bg-yellow-100" },
          { text: "Nhiá»‡t Ä‘á»™ tÄƒng thÃªm", icon: "ğŸ”¥", color: "bg-red-200" }
        ],
        description: "BÄƒng vÃ  tuyáº¿t cÃ³ mÃ u tráº¯ng pháº£n chiáº¿u 80-90% Ã¡nh sÃ¡ng. Khi tan, Ä‘áº¥t vÃ  nÆ°á»›c tá»‘i mÃ u chá»‰ pháº£n chiáº¿u 10-20%, háº¥p thá»¥ nhiá»u nhiá»‡t hÆ¡n, lÃ m bÄƒng tan nhanh hÆ¡n.",
        impact: "Ráº¥t cao",
        timescale: "Tháº­p ká»·"
      },
      {
        name: "Giáº£i phÃ³ng KhÃ­ Metan tá»« VÃ¹ng Ä‘áº¥t Ä‘Ã³ng bÄƒng",
        icon: "ğŸ’¨",
        steps: [
          { text: "Nhiá»‡t Ä‘á»™ tÄƒng", icon: "ğŸŒ¡ï¸", color: "bg-red-100" },
          { text: "Permafrost (Ä‘áº¥t Ä‘Ã³ng bÄƒng vÄ©nh cá»­u) tan", icon: "ğŸ”ï¸", color: "bg-brown-100" },
          { text: "Giáº£i phÃ³ng khÃ­ metan CHâ‚„", icon: "ğŸ’¨", color: "bg-green-100" },
          { text: "Metan giá»¯ nhiá»‡t gáº¥p 25 láº§n COâ‚‚", icon: "ğŸ”¥", color: "bg-orange-100" },
          { text: "Nhiá»‡t Ä‘á»™ tÄƒng nhanh hÆ¡n", icon: "ğŸ“ˆ", color: "bg-red-200" }
        ],
        description: "VÃ¹ng permafrost chá»©a hÃ ng tá»· táº¥n carbon bá»‹ Ä‘Ã³ng bÄƒng. Khi tan, vi khuáº©n phÃ¢n há»§y cháº¥t há»¯u cÆ¡ vÃ  tháº£i ra metan - khÃ­ nhÃ  kÃ­nh cá»±c máº¡nh.",
        impact: "Ráº¥t cao",
        timescale: "Tháº­p ká»· Ä‘áº¿n tháº¿ ká»·"
      },
      {
        name: "ChÃ¡y rá»«ng",
        icon: "ğŸ”¥",
        steps: [
          { text: "Nhiá»‡t Ä‘á»™ tÄƒng, khÃ´ háº¡n", icon: "ğŸŒ¡ï¸", color: "bg-red-100" },
          { text: "Rá»«ng khÃ´, dá»… chÃ¡y", icon: "ğŸŒ³", color: "bg-yellow-100" },
          { text: "ChÃ¡y rá»«ng quy mÃ´ lá»›n", icon: "ğŸ”¥", color: "bg-orange-200" },
          { text: "Giáº£i phÃ³ng COâ‚‚ khá»•ng lá»“", icon: "ğŸ’¨", color: "bg-gray-200" },
          { text: "Nhiá»‡t Ä‘á»™ tÄƒng cao hÆ¡n", icon: "ğŸ“ˆ", color: "bg-red-200" }
        ],
        description: "CÃ¢y xanh lÃ  bá»ƒ chá»©a carbon. Khi chÃ¡y, carbon Ä‘Æ°á»£c giáº£i phÃ³ng trá»Ÿ láº¡i khÃ­ quyá»ƒn. Äá»“ng thá»i máº¥t Ä‘i kháº£ nÄƒng háº¥p thá»¥ COâ‚‚ trong tÆ°Æ¡ng lai.",
        impact: "Cao",
        timescale: "NÄƒm Ä‘áº¿n tháº­p ká»·"
      },
      {
        name: "HÆ¡i nÆ°á»›c trong KhÃ­ quyá»ƒn",
        icon: "ğŸ’§",
        steps: [
          { text: "Nhiá»‡t Ä‘á»™ tÄƒng", icon: "ğŸŒ¡ï¸", color: "bg-red-100" },
          { text: "NÆ°á»›c biá»ƒn bá»‘c hÆ¡i nhiá»u hÆ¡n", icon: "ğŸŒŠ", color: "bg-blue-100" },
          { text: "HÆ¡i nÆ°á»›c tÄƒng trong khÃ­ quyá»ƒn", icon: "â˜ï¸", color: "bg-gray-100" },
          { text: "HÆ¡i nÆ°á»›c lÃ  khÃ­ nhÃ  kÃ­nh", icon: "ğŸ ", color: "bg-purple-100" },
          { text: "Giá»¯ nhiá»‡t tá»‘t hÆ¡n", icon: "ğŸ”¥", color: "bg-red-200" }
        ],
        description: "HÆ¡i nÆ°á»›c lÃ  khÃ­ nhÃ  kÃ­nh tá»± nhiÃªn máº¡nh nháº¥t. Nhiá»‡t Ä‘á»™ cÃ ng cao, cÃ ng nhiá»u nÆ°á»›c bá»‘c hÆ¡i, táº¡o vÃ²ng láº·p tá»± tÄƒng cÆ°á»ng.",
        impact: "Ráº¥t cao",
        timescale: "NgÃ y Ä‘áº¿n thÃ¡ng"
      },
      {
        name: "Giáº£m Háº¥p thá»¥ COâ‚‚ cá»§a Äáº¡i dÆ°Æ¡ng",
        icon: "ğŸŒŠ",
        steps: [
          { text: "Nhiá»‡t Ä‘á»™ nÆ°á»›c biá»ƒn tÄƒng", icon: "ğŸŒ¡ï¸", color: "bg-red-100" },
          { text: "Kháº£ nÄƒng hÃ²a tan COâ‚‚ giáº£m", icon: "ğŸ’¨", color: "bg-blue-100" },
          { text: "COâ‚‚ tÃ­ch tá»¥ trong khÃ­ quyá»ƒn", icon: "â˜ï¸", color: "bg-gray-200" },
          { text: "Hiá»‡u á»©ng nhÃ  kÃ­nh tÄƒng", icon: "   ", color: "bg-orange-100" },
          { text: "Nhiá»‡t Ä‘á»™ tÄƒng cao hÆ¡n", icon: "ğŸ“ˆ", color: "bg-red-200" }
        ],
        description: "Äáº¡i dÆ°Æ¡ng háº¥p thá»¥ 25% COâ‚‚ do con ngÆ°á»i tháº£i ra. NÆ°á»›c áº¥m hÃ²a tan COâ‚‚ kÃ©m hÆ¡n nÆ°á»›c láº¡nh, lÃ m giáº£m kháº£ nÄƒng háº¥p thá»¥ carbon cá»§a biá»ƒn.",
        impact: "Cao",
        timescale: "Tháº­p ká»·"
      },
      {
        name: "Suy giáº£m Amazon",
        icon: "ğŸŒ³",
        steps: [
          { text: "Háº¡n hÃ¡n vÃ  nhiá»‡t Ä‘á»™ cao", icon: "ğŸŒ¡ï¸", color: "bg-red-100" },
          { text: "CÃ¢y cháº¿t, rá»«ng suy thoÃ¡i", icon: "ğŸªµ", color: "bg-brown-100" },
          { text: "Giáº£m lÆ°á»£ng mÆ°a (cÃ¢y táº¡o mÆ°a)", icon: "â˜ï¸", color: "bg-gray-200" },
          { text: "Háº¡n hÃ¡n tráº§m trá»ng hÆ¡n", icon: "ğŸœï¸", color: "bg-yellow-200" },
          { text: "Rá»«ng chuyá»ƒn thÃ nh tháº£o nguyÃªn", icon: "ğŸŒ¾", color: "bg-green-100" }
        ],
        description: "Rá»«ng Amazon táº¡o ra mÆ°a cho chÃ­nh nÃ³. Khi cÃ¢y cháº¿t, mÆ°a giáº£m, gÃ¢y háº¡n hÃ¡n nhiá»u hÆ¡n. Äiá»ƒm tá»›i háº¡n: máº¥t 20-25% diá»‡n tÃ­ch rá»«ng.",
        impact: "Ráº¥t cao",
        timescale: "Tháº­p ká»· Ä‘áº¿n tháº¿ ká»·"
      }
    ];

    const negativeFeedbackLoops = [
      {
        name: "HÃ¬nh thÃ nh MÃ¢y",
        icon: "â˜ï¸",
        steps: [
          { text: "Nhiá»‡t Ä‘á»™ tÄƒng", icon: "ğŸŒ¡ï¸", color: "bg-red-100" },
          { text: "Bá»‘c hÆ¡i nÆ°á»›c nhiá»u hÆ¡n", icon: "ğŸ’§", color: "bg-blue-100" },
          { text: "MÃ¢y hÃ¬nh thÃ nh dÃ y hÆ¡n", icon: "â˜ï¸", color: "bg-gray-100" },
          { text: "Pháº£n chiáº¿u Ã¡nh sÃ¡ng máº·t trá»i", icon: "â˜€ï¸", color: "bg-yellow-100" },
          { text: "Nhiá»‡t Ä‘á»™ giáº£m xuá»‘ng", icon: "â„ï¸", color: "bg-blue-200" }
        ],
        description: "MÃ¢y tráº¯ng pháº£n chiáº¿u Ã¡nh sÃ¡ng máº·t trá»i trá»Ÿ láº¡i khÃ´ng gian, giáº£m lÆ°á»£ng nhiá»‡t Ä‘áº¿n bá» máº·t TrÃ¡i Ä‘áº¥t. Tuy nhiÃªn, hiá»‡u á»©ng nÃ y phá»©c táº¡p vÃ  phá»¥ thuá»™c vÃ o loáº¡i mÃ¢y.",
        impact: "Trung bÃ¬nh",
        timescale: "Giá» Ä‘áº¿n ngÃ y",
        note: "âš ï¸ LÆ°u Ã½: MÃ¢y cao (cirrus) láº¡i cÃ³ tÃ¡c dá»¥ng giá»¯ nhiá»‡t, táº¡o pháº£n há»“i dÆ°Æ¡ng. Chá»‰ mÃ¢y tháº¥p (cumulus) má»›i cÃ³ pháº£n há»“i Ã¢m máº¡nh."
      },
      {
        name: "TÄƒng cÆ°á»ng Quang há»£p",
        icon: "ğŸŒ±",
        steps: [
          { text: "COâ‚‚ trong khÃ­ quyá»ƒn tÄƒng", icon: "ğŸ’¨", color: "bg-gray-100" },
          { text: "CÃ¢y cÃ³ nhiá»u COâ‚‚ Ä‘á»ƒ quang há»£p", icon: "ğŸŒ¿", color: "bg-green-100" },
          { text: "CÃ¢y phÃ¡t triá»ƒn nhanh hÆ¡n", icon: "ğŸŒ³", color: "bg-green-200" },
          { text: "Háº¥p thá»¥ nhiá»u COâ‚‚ tá»« khÃ­ quyá»ƒn", icon: "ğŸ“‰", color: "bg-blue-100" },
          { text: "Ná»“ng Ä‘á»™ COâ‚‚ giáº£m", icon: "âœ…", color: "bg-green-300" }
        ],
        description: "COâ‚‚ lÃ  'thá»©c Äƒn' cho cÃ¢y. Khi ná»“ng Ä‘á»™ COâ‚‚ cao, cÃ¢y phÃ¡t triá»ƒn nhanh vÃ  háº¥p thá»¥ nhiá»u carbon hÆ¡n. Hiá»‡u á»©ng nÃ y gá»i lÃ  'COâ‚‚ fertilization'.",
        impact: "Trung bÃ¬nh",
        timescale: "NÄƒm Ä‘áº¿n tháº­p ká»·",
        note: "âš ï¸ Giá»›i háº¡n: CÃ¢y cáº§n nÆ°á»›c, dinh dÆ°á»¡ng vÃ  Ä‘iá»u kiá»‡n khÃ­ háº­u phÃ¹ há»£p. Hiá»‡u á»©ng nÃ y khÃ´ng Ä‘á»§ Ä‘á»ƒ cÃ¢n báº±ng phÃ¡t tháº£i cá»§a con ngÆ°á»i."
      },
      {
        name: "Bá»©c xáº¡ Nhiá»‡t ra KhÃ´ng gian",
        icon: "ğŸŒ",
        steps: [
          { text: "Nhiá»‡t Ä‘á»™ TrÃ¡i Ä‘áº¥t tÄƒng", icon: "ğŸŒ¡ï¸", color: "bg-red-100" },
          { text: "Bá»©c xáº¡ há»“ng ngoáº¡i tÄƒng", icon: "ğŸ“¡", color: "bg-purple-100" },
          { text: "Nhiá»u nhiá»‡t thoÃ¡t ra khÃ´ng gian", icon: "ğŸŒŒ", color: "bg-blue-900 text-white" },
          { text: "Máº¥t nhiá»‡t nhanh hÆ¡n", icon: "â„ï¸", color: "bg-blue-100" },
          { text: "Nhiá»‡t Ä‘á»™ giáº£m dáº§n", icon: "ğŸ“‰", color: "bg-green-200" }
        ],
        description: "Theo Ä‘á»‹nh luáº­t Stefan-Boltzmann, váº­t cÃ ng nÃ³ng cÃ ng phÃ¡t ra nhiá»u bá»©c xáº¡. TrÃ¡i Ä‘áº¥t nÃ³ng lÃªn sáº½ tá»a nhiá»u nhiá»‡t ra khÃ´ng gian.",
        impact: "Tháº¥p Ä‘áº¿n Trung bÃ¬nh",
        timescale: "Ngay láº­p tá»©c",
        note: "âš ï¸ Giá»›i háº¡n: KhÃ­ nhÃ  kÃ­nh cháº·n bá»©c xáº¡ nhiá»‡t, lÃ m giáº£m hiá»‡u quáº£ cá»§a pháº£n há»“i nÃ y. ÄÃ¢y lÃ  váº¥n Ä‘á» cá»‘t lÃµi cá»§a hiá»‡u á»©ng nhÃ  kÃ­nh."
      },
      {
        name: "HÃ²a tan COâ‚‚ vÃ o Äáº¡i dÆ°Æ¡ng",
        icon: "ğŸŒŠ",
        steps: [
          { text: "COâ‚‚ trong khÃ­ quyá»ƒn tÄƒng", icon: "ğŸ’¨", color: "bg-gray-100" },
          { text: "Gradien ná»“ng Ä‘á»™ tÄƒng", icon: "âš–ï¸", color: "bg-blue-100" },
          { text: "Äáº¡i dÆ°Æ¡ng háº¥p thá»¥ nhiá»u COâ‚‚", icon: "ğŸŒŠ", color: "bg-blue-200" },
          { text: "COâ‚‚ khÃ­ quyá»ƒn giáº£m", icon: "ğŸ“‰", color: "bg-green-100" },
          { text: "Hiá»‡u á»©ng nhÃ  kÃ­nh giáº£m", icon: "âœ…", color: "bg-green-200" }
        ],
        description: "Äáº¡i dÆ°Æ¡ng háº¥p thá»¥ khoáº£ng 25% COâ‚‚ do con ngÆ°á»i tháº£i ra má»—i nÄƒm, giÃºp giáº£m tá»‘c Ä‘á»™ tÄƒng nhiá»‡t Ä‘á»™.",
        impact: "Cao",
        timescale: "NÄƒm Ä‘áº¿n tháº­p ká»·",
        note: "âš ï¸ Háº­u quáº£: COâ‚‚ hÃ²a tan táº¡o acid carbonic, lÃ m axit hÃ³a Ä‘áº¡i dÆ°Æ¡ng, gÃ¢y háº¡i cho san hÃ´ vÃ  sinh váº­t cÃ³ vá»."
      },
      {
        name: "Phong hÃ³a ÄÃ¡ (Silicate Weathering)",
        icon: "ğŸª¨",
        steps: [
          { text: "Nhiá»‡t Ä‘á»™ vÃ  mÆ°a tÄƒng", icon: "ğŸŒ§ï¸", color: "bg-blue-100" },
          { text: "Phong hÃ³a hÃ³a há»c Ä‘Ã¡ tÄƒng", icon: "ğŸª¨", color: "bg-gray-200" },
          { text: "COâ‚‚ bá»‹ háº¥p thá»¥ trong pháº£n á»©ng", icon: "âš—ï¸", color: "bg-purple-100" },
          { text: "COâ‚‚ khÃ­ quyá»ƒn giáº£m", icon: "ğŸ“‰", color: "bg-green-100" },
          { text: "Nhiá»‡t Ä‘á»™ giáº£m", icon: "â„ï¸", color: "bg-blue-200" }
        ],
        description: "MÆ°a vÃ  nhiá»‡t pháº£n á»©ng vá»›i Ä‘Ã¡ silicate, háº¥p thá»¥ COâ‚‚. ÄÃ¢y lÃ  quÃ¡ trÃ¬nh Ä‘iá»u hÃ²a khÃ­ háº­u TrÃ¡i Ä‘áº¥t trong hÃ ng triá»‡u nÄƒm.",
        impact: "Ráº¥t cao",
        timescale: "HÃ ng nghÃ¬n Ä‘áº¿n triá»‡u nÄƒm",
        note: "âš ï¸ QuÃ¡ cháº­m: Pháº£n há»“i nÃ y máº¥t hÃ ng nghÃ¬n nÄƒm, khÃ´ng ká»‹p Ä‘á»‘i phÃ³ vá»›i biáº¿n Ä‘á»•i khÃ­ háº­u hiá»‡n táº¡i."
      }
    ];

    const achievements = [
      {
        minScore: 0,
        icon: "ğŸŒ±",
        title: "NgÆ°á»i má»›i báº¯t Ä‘áº§u",
        description: "Báº¡n cáº§n tÃ¬m hiá»ƒu thÃªm vá» biáº¿n Ä‘á»•i khÃ­ háº­u!"
      },
      {
        minScore: 3,
        icon: "ğŸŒ¿",
        title: "Há»c viÃªn KhÃ­ háº­u",
        description: "Báº¡n Ä‘Ã£ cÃ³ kiáº¿n thá»©c cÆ¡ báº£n vá» khÃ­ háº­u!"
      },
      {
        minScore: 5,
        icon: "ğŸŒ³",
        title: "Chiáº¿n binh MÃ´i trÆ°á»ng",
        description: "Báº¡n hiá»ƒu rÃµ vá» váº¥n Ä‘á» biáº¿n Ä‘á»•i khÃ­ háº­u!"
      },
      {
        minScore: 7,
        icon: "ğŸŒ",
        title: "ChuyÃªn gia KhÃ­ háº­u",
        description: "Kiáº¿n thá»©c cá»§a báº¡n ráº¥t áº¥n tÆ°á»£ng!"
      },
      {
        minScore: 9,
        icon: "ğŸ†",
        title: "Báº­c tháº§y KhÃ­ háº­u",
        description: "Báº¡n lÃ  chuyÃªn gia hÃ ng Ä‘áº§u vá» biáº¿n Ä‘á»•i khÃ­ háº­u!"
      },
      {
        minScore: 10,
        icon: "ğŸŒŸ",
        title: "SiÃªu sao KhÃ­ háº­u",
        description: "HoÃ n háº£o! Báº¡n lÃ  ngÆ°á»i hÃ¹ng cá»§a TrÃ¡i Ä‘áº¥t!"
      }
    ];

    const climateEvents = [
      {
        name: "ğŸŒŠ SiÃªu bÃ£o nhiá»‡t Ä‘á»›i",
        description: "Má»™t cÆ¡n bÃ£o máº¡nh cáº¥p 5 táº¥n cÃ´ng vÃ¹ng ven biá»ƒn",
        tempImpact: 0.05,
        co2Impact: 5,
        icon: "ğŸŒ€"
      },
      {
        name: "ğŸ”¥ ChÃ¡y rá»«ng quy mÃ´ lá»›n",
        description: "HÃ ng triá»‡u hecta rá»«ng bá»‹ thiÃªu rá»¥i, tháº£i COâ‚‚ khá»•ng lá»“",
        tempImpact: 0.08,
        co2Impact: 15,
        icon: "ğŸ”¥"
      },
      {
        name: "â„ï¸ BÄƒng tan á»Ÿ Báº¯c Cá»±c",
        description: "BÄƒng Báº¯c Cá»±c tan vá»›i tá»‘c Ä‘á»™ ká»· lá»¥c",
        tempImpact: 0.06,
        co2Impact: 8,
        icon: "ğŸ§Š"
      },
      {
        name: "ğŸŒ¡ï¸ Náº¯ng nÃ³ng ká»· lá»¥c",
        description: "SÃ³ng nhiá»‡t kÃ©o dÃ i hÆ¡n 3 thÃ¡ng á»Ÿ nhiá»u chÃ¢u lá»¥c",
        tempImpact: 0.07,
        co2Impact: 10,
        icon: "â˜€ï¸"
      },
      {
        name: "ğŸŒ§ï¸ LÅ© lá»¥t nghiÃªm trá»ng",
        description: "MÆ°a lá»›n gÃ¢y lÅ© quÃ©t vÃ  ngáº­p lá»¥t diá»‡n rá»™ng",
        tempImpact: 0.04,
        co2Impact: 6,
        icon: "ğŸ’§"
      },
      {
        name: "ğŸ§Š Sáº¡t lá»Ÿ bÄƒng hÃ ",
        description: "CÃ¡c dÃ²ng bÄƒng hÃ  sá»¥p Ä‘á»• vá»›i quy mÃ´ chÆ°a tá»«ng tháº¥y",
        tempImpact: 0.05,
        co2Impact: 7,
        icon: "â›°ï¸"
      },
      {
        name: "ğŸŒ¾ Háº¡n hÃ¡n kÃ©o dÃ i",
        description: "Thiáº¿u nÆ°á»›c nghiÃªm trá»ng áº£nh hÆ°á»Ÿng nÃ´ng nghiá»‡p toÃ n cáº§u",
        tempImpact: 0.06,
        co2Impact: 9,
        icon: "ğŸœï¸"
      },
      {
        name: "ğŸ¦  Dá»‹ch bá»‡nh tá»« khÃ­ háº­u",
        description: "Nhiá»‡t Ä‘á»™ tÄƒng lÃ m bÃ¹ng phÃ¡t dá»‹ch bá»‡nh nhiá»‡t Ä‘á»›i",
        tempImpact: 0.03,
        co2Impact: 4,
        icon: ""
      }
    ];

    function showToast(message, type = 'success') {
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.textContent = message;
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 3000);
    }

    function adjustColor(color, percent) {
      const num = parseInt(color.replace("#",""), 16);
      const amt = Math.round(2.55 * percent);
      const R = (num >> 16) + amt;
      const G = (num >> 8 & 0x00FF) + amt;
      const B = (num & 0x0000FF) + amt;
      return "#" + (0x1000000 + (R<255?R<1?0:R:255)*0x10000 +
        (G<255?G<1?0:G:255)*0x100 + (B<255?B<1?0:B:255))
        .toString(16).slice(1);
    }

    async function initializeApp() {
      if (window.elementSdk) {
        await window.elementSdk.init({
          defaultConfig,
          onConfigChange: async (config) => {
            const app = document.getElementById('app');
            app.style.background = `linear-gradient(135deg, ${config.background_color || defaultConfig.background_color} 0%, ${adjustColor(config.background_color || defaultConfig.background_color, -20)} 100%)`;
            
            const surfaces = document.querySelectorAll('.bg-white');
            surfaces.forEach(surface => {
              surface.style.backgroundColor = config.surface_color || defaultConfig.surface_color;
            });

            document.getElementById('main-title').textContent = config.app_title || defaultConfig.app_title;
            document.getElementById('main-subtitle').textContent = config.app_subtitle || defaultConfig.app_subtitle;

            const customFont = config.font_family || defaultConfig.font_family;
            document.body.style.fontFamily = `${customFont}, Arial, sans-serif`;

            const baseSize = config.font_size || defaultConfig.font_size;
            document.getElementById('main-title').style.fontSize = `${baseSize * 2.25}px`;
            document.getElementById('main-subtitle').style.fontSize = `${baseSize}px`;
          },
          mapToCapabilities: (config) => ({
            recolorables: [
              {
                get: () => config.background_color || defaultConfig.background_color,
                set: (value) => {
                  window.elementSdk.config.background_color = value;
                  window.elementSdk.setConfig({ background_color: value });
                }
              },
              {
                get: () => config.surface_color || defaultConfig.surface_color,
                set: (value) => {
                  window.elementSdk.config.surface_color = value;
                  window.elementSdk.setConfig({ surface_color: value });
                }
              },
              {
                get: () => config.text_color || defaultConfig.text_color,
                set: (value) => {
                  window.elementSdk.config.text_color = value;
                  window.elementSdk.setConfig({ text_color: value });
                }
              },
              {
                get: () => config.primary_action_color || defaultConfig.primary_action_color,
                set: (value) => {
                  window.elementSdk.config.primary_action_color = value;
                  window.elementSdk.setConfig({ primary_action_color: value });
                }
              },
              {
                get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
                set: (value) => {
                  window.elementSdk.config.secondary_action_color = value;
                  window.elementSdk.setConfig({ secondary_action_color: value });
                }
              }
            ],
            borderables: [],
            fontEditable: {
              get: () => config.font_family || defaultConfig.font_family,
              set: (value) => {
                window.elementSdk.config.font_family = value;
                window.elementSdk.setConfig({ font_family: value });
              }
            },
            fontSizeable: {
              get: () => config.font_size || defaultConfig.font_size,
              set: (value) => {
                window.elementSdk.config.font_size = value;
                window.elementSdk.setConfig({ font_size: value });
              }
            }
          }),
          mapToEditPanelValues: (config) => new Map([
            ["app_title", config.app_title || defaultConfig.app_title],
            ["app_subtitle", config.app_subtitle || defaultConfig.app_subtitle]
          ])
        });
      }

      const initResult = await window.dataSdk.init({
        onDataChanged(data) {
          scenarios = data;
          renderScenariosList();
        }
      });

      if (!initResult.isOk) {
        console.error("Failed to initialize data SDK");
      }

      initializeChart();
      setupEventListeners();
      updatePredictions();
      loadQuizQuestion();
    }

    function initializeChart() {
      predictionChart = new Chart(document.getElementById('predictionChart').getContext('2d'), {
        type: 'line',
        data: {
          labels: [2024, 2040, 2060, 2080, 2100],
          datasets: [{
            label: 'Nhiá»‡t Ä‘á»™ dá»± Ä‘oÃ¡n (Â°C)',
            data: [1.2, 1.5, 1.9, 2.2, 2.5],
            borderColor: '#f59e0b',
            backgroundColor: 'rgba(245, 158, 11, 0.1)',
            tension: 0.4
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: true,
          plugins: { legend: { display: true } }
        }
      });

      // Historical data chart
      const historicalYears = [];
      const historicalTemps = [];
      for (let year = 1880; year <= 2023; year += 10) {
        historicalYears.push(year);
        // Simplified historical data approximation
        const baseTemp = -0.4;
        const increase = ((year - 1880) / 143) * 1.6;
        historicalTemps.push(baseTemp + increase);
      }

      historicalChart = new Chart(document.getElementById('historicalChart').getContext('2d'), {
        type: 'line',
        data: {
          labels: historicalYears,
          datasets: [{
            label: 'Äá»™ lá»‡ch nhiá»‡t Ä‘á»™ (Â°C)',
            data: historicalTemps,
            borderColor: '#dc2626',
            backgroundColor: 'rgba(220, 38, 38, 0.1)',
            tension: 0.4,
            fill: true
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: true,
          plugins: {
            legend: { display: true }
          },
          scales: {
            y: {
              title: {
                display: true,
                text: 'Äá»™ lá»‡ch nhiá»‡t Ä‘á»™ (Â°C)'
              }
            },
            x: {
              title: {
                display: true,
                text: 'NÄƒm'
              }
            }
          }
        }
      });

      // Solutions comparison chart
      solutionsChart = new Chart(document.getElementById('solutionsChart').getContext('2d'), {
        type: 'line',
        data: {
          labels: [2024, 2040, 2060, 2080, 2100],
          datasets: [
            {
              label: 'KhÃ´ng hÃ nh Ä‘á»™ng',
              data: [1.2, 1.5, 1.9, 2.2, 2.5],
              borderColor: '#dc2626',
              backgroundColor: 'rgba(220, 38, 38, 0.1)',
              tension: 0.4
            },
            {
              label: 'Vá»›i giáº£i phÃ¡p',
              data: [1.2, 1.5, 1.9, 2.2, 2.5],
              borderColor: '#10b981',
              backgroundColor: 'rgba(16, 185, 129, 0.1)',
              tension: 0.4
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: true,
          plugins: {
            legend: { display: true }
          },
          scales: {
            y: {
              title: {
                display: true,
                text: 'Nhiá»‡t Ä‘á»™ (Â°C)'
              }
            }
          }
        }
      });
    }

    let currentFeedbackType = 'positive'; // Track which feedback loops to show

    function setupEventListeners() {
      const tabs = ['historical', 'simulation', 'solutions', 'timeline', 'scenarios', 'compare', 'quiz', 'dictionary', 'feedback'];
      
      tabs.forEach(tabName => {
        const tabButton = document.getElementById(`tab-${tabName}`);
        if (tabButton) {
          tabButton.addEventListener('click', () => {
            // Remove active state from all tabs
            tabs.forEach(t => {
              const btn = document.getElementById(`tab-${t}`);
              if (btn) {
                btn.classList.remove('text-blue-600', 'border-b-4', 'border-blue-600');
                btn.classList.add('text-gray-600');
              }
              const content = document.getElementById(`content-${t}`);
              if (content) {
                content.classList.add('hidden');
              }
            });
            
            // Add active state to clicked tab
            tabButton.classList.add('text-blue-600', 'border-b-4', 'border-blue-600');
            tabButton.classList.remove('text-gray-600');
            
            const content = document.getElementById(`content-${tabName}`);
            if (content) {
              content.classList.remove('hidden');
            }
          });
        }
      });

      ['co2-rate', 'temp-anomaly', 'ice-melt'].forEach(id => {
        document.getElementById(id).addEventListener('input', () => updatePredictions());
      });

      // Timeline controls
      document.getElementById('timeline-next').addEventListener('click', () => {
        if (currentYear < 2100) {
          currentYear++;
          updateTimeline();
        }
      });

      document.getElementById('timeline-prev').addEventListener('click', () => {
        if (currentYear > 2024) {
          currentYear--;
          updateTimeline();
        }
      });

      document.getElementById('timeline-reset').addEventListener('click', () => {
        currentYear = 2024;
        timelineTemp = 1.2;
        timelineCO2 = 420;
        yearEvents = {};
        updateTimeline();
      });

      // Solution toggles
      ['renewable', 'reforestation', 'electric'].forEach(solution => {
        document.getElementById(`solution-${solution}`).addEventListener('click', () => {
          activeSolutions[solution] = !activeSolutions[solution];
          updateSolutionsUI();
          updateSolutionsChart();
        });
      });

      // Quiz event listeners
      document.getElementById('next-question').addEventListener('click', () => {
        currentQuestionIndex++;
        selectedAnswer = null;
        document.getElementById('next-question').classList.add('hidden');
        document.getElementById('quiz-feedback').classList.add('hidden');
        
        if (currentQuestionIndex < quizQuestions.length) {
          loadQuizQuestion();
        } else {
          showQuizResult();
        }
      });

      document.getElementById('restart-quiz').addEventListener('click', () => {
        currentQuestionIndex = 0;
        quizScore = 0;
        selectedAnswer = null;
        document.getElementById('quiz-result').classList.add('hidden');
        document.getElementById('quiz-container').classList.remove('hidden');
        loadQuizQuestion();
      });

      // Dictionary search
      document.getElementById('dictionary-search').addEventListener('input', (e) => {
        renderDictionary(e.target.value);
      });

      // Feedback loops toggle
      document.getElementById('show-positive').addEventListener('click', () => {
        currentFeedbackType = 'positive';
        updateFeedbackButtons();
        renderFeedbackLoops();
      });

      document.getElementById('show-negative').addEventListener('click', () => {
        currentFeedbackType = 'negative';
        updateFeedbackButtons();
        renderFeedbackLoops();
      });

      document.getElementById('save-scenario').addEventListener('click', async () => {
        if (scenarios.length >= 999) {
          document.getElementById('limit-warning').classList.remove('hidden');
          setTimeout(() => {
            document.getElementById('limit-warning').classList.add('hidden');
          }, 3000);
          return;
        }

        const scenarioName = document.getElementById('scenario-name').value.trim() || `Ká»‹ch báº£n ${scenarios.length + 1}`;
        const co2Rate = parseFloat(document.getElementById('co2-rate').value);
        const tempAnomaly = parseFloat(document.getElementById('temp-anomaly').value);
        const iceMelt = parseFloat(document.getElementById('ice-melt').value);

        const saveButton = document.getElementById('save-scenario');
        saveButton.disabled = true;
        saveButton.textContent = 'â³ Äang lÆ°u...';

        const result = await window.dataSdk.create({
          scenario_name: scenarioName,
          co2_increase_rate: co2Rate,
          current_temp_anomaly: tempAnomaly,
          ice_melt_rate: iceMelt,
          created_at: new Date().toISOString(),
          renewable_energy: false,
          reforestation: false,
          electric_vehicles: false
        });

        saveButton.disabled = false;
        saveButton.textContent = 'ğŸ’¾ LÆ°u ká»‹ch báº£n';

        if (result.isOk) {
          showToast('ÄÃ£ lÆ°u ká»‹ch báº£n thÃ nh cÃ´ng!');
          document.getElementById('scenario-name').value = '';
        } else {
          showToast('Lá»—i khi lÆ°u ká»‹ch báº£n', 'error');
        }
      });
    }

    function getThreatLevel(temp) {
      if (temp < 1.5) {
        return {
          level: 'Ráº¥t tháº¥p',
          icon: 'ğŸŒ',
          description: 'TÃ¡c Ä‘á»™ng cÃ³ thá»ƒ kiá»ƒm soÃ¡t Ä‘Æ°á»£c',
          color: 'border-green-500 bg-green-50',
          textColor: 'text-green-900',
          events: ['ğŸŒ± Biáº¿n Ä‘á»•i nháº¹ trong mÃ´ hÃ¬nh thá»i tiáº¿t', 'ğŸŒŠ Má»±c nÆ°á»›c biá»ƒn dÃ¢ng cháº­m']
        };
      } else if (temp < 2.0) {
        return {
          level: 'Tháº¥p',
          icon: 'ğŸŒ',
          description: 'Báº¯t Ä‘áº§u cÃ³ tÃ¡c Ä‘á»™ng Ä‘Ã¡ng ch   Ã½',
          color: 'border-blue-500 bg-blue-50',
          textColor: 'text-blue-900',
          events: ['ğŸŒŠ LÅ© lá»¥t ven biá»ƒn tÄƒng', 'ğŸ  San hÃ´ báº¯t Ä‘áº§u bá»‹ táº©y tráº¯ng', 'â„ï¸ BÄƒng cá»±c báº¯t Ä‘áº§u tan']
        };
      } else if (temp < 2.5) {
        return {
          level: 'Trung bÃ¬nh',
          icon: 'ğŸŒ',
          description: 'TÃ¡c Ä‘á»™ng Ä‘Ã¡ng ká»ƒ Ä‘áº¿n há»‡ sinh thÃ¡i',
          color: 'border-yellow-500 bg-yellow-50',
          textColor: 'text-yellow-900',
          events: ['ğŸŒ€ BÃ£o nhiá»‡t Ä‘á»›i máº¡nh hÆ¡n', 'ğŸ”¥ ChÃ¡y rá»«ng gia tÄƒng', 'ğŸŒ¾ Háº¡n hÃ¡n kÃ©o dÃ i', 'ğŸ» Äá»™ng váº­t máº¥t mÃ´i trÆ°á»ng sá»‘ng']
        };
      } else if (temp < 3.0) {
        return {
          level: 'Cao',
          icon: 'ğŸ”¥',
          description: 'Thay Ä‘á»•i khÃ­ háº­u nghiÃªm tr  ng',
          color: 'border-orange-500 bg-orange-50',
          textColor: 'text-orange-900',
          events: ['ğŸŒŠ Ngáº­p lá»¥t quy mÃ´ lá»›n', 'ğŸœï¸ Sa máº¡c hÃ³a rá»™ng kháº¯p', 'ğŸ’§ Thiáº¿u nÆ°á»›c nghiÃªm trá»ng', 'ğŸŒ¡ï¸ SÃ³ng nhiá»‡t cháº¿t ngÆ°á»i', 'ğŸ¦Ÿ Dá»‹ch bá»‡nh lÃ¢y lan']
        };
      } else if (temp < 4.0) {
        return {
          level: 'NghiÃªm trá»ng',
          icon: 'âš ï¸',
          description: 'Tháº£m há»a khÃ­ háº­u to  n cáº§u',
          color: 'border-red-500 bg-red-50',
          textColor: 'text-red-900',
          events: ['ğŸ™ï¸ CÃ¡c thÃ nh phá»‘ ven biá»ƒn chÃ¬m', 'ğŸŒ¾ Máº¥t mÃ¹a trÃªn diá»‡n rá»™ng', 'ğŸ’€ Tuyá»‡t chá»§ng hÃ ng loáº¡t', 'ğŸŒªï¸ ThiÃªn tai liÃªn tá»¥c', 'ğŸš« Khá»§ng hoáº£ng nhÃ¢n Ä‘áº¡o']
        };
      } else {
        return {
          level: 'Cá»±c ká»³ nghiÃªm trá»ng',
          icon: 'â˜ ï¸',
          description: 'Nguy cÆ¡ sá»¥p Ä‘á»• vÄƒn minh',
          color: 'border-purple-800 bg-purple-100',
          textColor: 'text-purple-900',
          events: ['ğŸ’¥ Sá»¥p Ä‘á»• há»‡ sinh thÃ¡i toÃ n cáº§u', 'ğŸŒ TrÃ¡i Ä‘áº¥t khÃ´ng thá»ƒ sinh sá»‘ng', 'âš°ï¸ Tuyá»‡t chá»§ng hÃ ng loáº¡t loÃ i', 'ğŸ”¥ Äiá»ƒm khÃ´ng thá»ƒ quay láº¡i', 'ğŸ’” Sá»¥p Ä‘á»• xÃ£ há»™i loÃ i ngÆ°á»i']
        };
      }
    }

    function updateThreatLevel(temp) {
      const threat = getThreatLevel(temp);
      const box = document.getElementById('threat-level-box');
      
      box.className = `border-l-4 p-4 mb-6 rounded-r-lg ${threat.color}`;
      document.getElementById('threat-icon').textContent = threat.icon;
      document.getElementById('threat-level').textContent = threat.level;
      document.getElementById('threat-level').className = `text-2xl font-bold ${threat.textColor}`;
      document.getElementById('threat-description').textContent = threat.description;
      document.getElementById('threat-description').className = `text-sm mt-1 ${threat.textColor}`;
      
      const eventsHTML = `
        <p class="text-sm font-semibold mb-2 ${threat.textColor}">Sá»± kiá»‡n cÃ³ thá»ƒ xáº£y ra:</p>
        ${threat.events.map(event => `<p class="text-sm ${threat.textColor}">â€¢ ${event}</p>`).join('')}
      `;
      document.getElementById('threat-events').innerHTML = eventsHTML;
    }

    function updatePredictions() {
      const co2Rate = parseFloat(document.getElementById('co2-rate').value) || 0;
      const tempAnomaly = parseFloat(document.getElementById('temp-anomaly').value) || 0;
      const iceMelt = parseFloat(document.getElementById('ice-melt').value) || 0;

      const yearsToProject = 2100 - 2024;
      const co2_2100 = co2Rate >= 0 ? 420 * Math.pow(1 + co2Rate/100, yearsToProject) : Math.max(280, 420 * Math.pow(1 + co2Rate/100, yearsToProject));
      const tempIncrease = 3 * Math.log(co2_2100 / 420) / Math.log(2);
      const albedoFeedback = (iceMelt * yearsToProject) * 0.001;
      const temp_2100 = tempAnomaly + tempIncrease + albedoFeedback;
      const seaLevel_2100 = (iceMelt * yearsToProject) + ((temp_2100 - tempAnomaly) * 2);

      document.getElementById('temp-2100').textContent = `${temp_2100 >= 0 ? '+' : ''}${temp_2100.toFixed(1)}Â°C`;
      document.getElementById('sea-level-2100').textContent = `${seaLevel_2100 >= 0 ? '+' : ''}${Math.round(seaLevel_2100)} mm`;
      document.getElementById('co2-2100').textContent = `${Math.round(co2_2100)} ppm`;

      updateThreatLevel(temp_2100);

      const projectionYears = [2024, 2040, 2060, 2080, 2100];
      const projectionTemps = projectionYears.map(year => {
        const t = year - 2024;
        const co2_t = co2Rate >= 0 ? 420 * Math.pow(1 + co2Rate/100, t) : Math.max(280, 420 * Math.pow(1 + co2Rate/100, t));
        const tempInc = 3 * Math.log(co2_t / 420) / Math.log(2);
        const albedo = (iceMelt * t) * 0.001;
        return tempAnomaly + tempInc + albedo;
      });

      predictionChart.data.datasets[0].data = projectionTemps;
      predictionChart.update();
    }

    function updateTimeline() {
      const yearsSince2024 = currentYear - 2024;
      
      // Calculate temperature and CO2 increase
      const baseTemp = 1.2 + (yearsSince2024 * 0.02);
      const baseCO2 = 420 + (yearsSince2024 * 2.5);
      
      // Check if this year has an event (30% chance)
      if (!yearEvents[currentYear] && currentYear > 2024) {
        const hasEvent = Math.random() < 0.3;
        if (hasEvent) {
          const randomEvent = climateEvents[Math.floor(Math.random() * climateEvents.length)];
          yearEvents[currentYear] = randomEvent;
          
          // Apply event impacts
          timelineTemp += randomEvent.tempImpact;
          timelineCO2 += randomEvent.co2Impact;
        }
      }
      
      // Use base values for 2024 or accumulated values
      if (currentYear === 2024) {
        timelineTemp = 1.2;
        timelineCO2 = 420;
      } else {
        // Gradually increase even without events
        if (!yearEvents[currentYear]) {
          timelineTemp = baseTemp;
          timelineCO2 = baseCO2;
        }
      }
      
      // Update UI
      document.getElementById('timeline-year').textContent = `NÄƒm ${currentYear}`;
      document.getElementById('timeline-temp').textContent = `Nhiá»‡t Ä‘á»™: +${timelineTemp.toFixed(2)}Â°C`;
      document.getElementById('timeline-co2').textContent = `COâ‚‚: ${Math.round(timelineCO2)} ppm`;
      
      // Show/hide event
      const eventDiv = document.getElementById('timeline-event');
      if (yearEvents[currentYear]) {
        const event = yearEvents[currentYear];
        document.getElementById('event-description').textContent = event.name;
        document.getElementById('event-impact').textContent = `${event.description} | TÃ¡c Ä‘á»™ng: +${event.tempImpact}Â°C, +${event.co2Impact} ppm COâ‚‚`;
        eventDiv.classList.remove('hidden');
      } else {
        eventDiv.classList.add('hidden');
      }
      
      // Update Earth icon based on threat level
      const threat = getThreatLevel(timelineTemp);
      document.getElementById('timeline-icon').textContent = threat.icon;
      
      // Update progress bar
      const progress = (yearsSince2024 / 76) * 100;
      document.getElementById('timeline-bar').style.width = `${progress}%`;
      document.getElementById('timeline-progress').textContent = `${yearsSince2024} / 76 nÄƒm`;
      
      // Update button states
      document.getElementById('timeline-prev').disabled = currentYear === 2024;
    }

    function updateSolutionsUI() {
      const solutionImpacts = {
        renewable: 0.3,
        reforestation: 0.2,
        electric: 0.15
      };

      // Update each solution card
      ['renewable', 'reforestation', 'electric'].forEach(solution => {
        const card = document.getElementById(`solution-${solution}`);
        const status = card.querySelector('.solution-status');
        
        if (activeSolutions[solution]) {
          card.classList.remove('bg-gray-50', 'border-gray-300');
          card.classList.add('bg-green-50', 'border-green-500');
          status.textContent = 'âœ…';
        } else {
          card.classList.remove('bg-green-50', 'border-green-500');
          card.classList.add('bg-gray-50', 'border-gray-300');
          status.textContent = 'â­•';
        }
      });

      // Calculate total impact
      let totalImpact = 0;
      Object.keys(activeSolutions).forEach(solution => {
        if (activeSolutions[solution]) {
          totalImpact += solutionImpacts[solution];
        }
      });

      document.getElementById('total-impact').textContent = totalImpact.toFixed(1);
      
      const baseTemp = 2.5;
      const finalTemp = baseTemp - totalImpact;
      document.getElementById('final-temp').textContent = `+${finalTemp.toFixed(1)}`;
    }

    function updateSolutionsChart() {
      const solutionImpacts = {
        renewable: 0.3,
        reforestation: 0.2,
        electric: 0.15
      };

      let totalImpact = 0;
      Object.keys(activeSolutions).forEach(solution => {
        if (activeSolutions[solution]) {
          totalImpact += solutionImpacts[solution];
        }
      });

      // Base scenario (no action)
      const baseScenario = [1.2, 1.5, 1.9, 2.2, 2.5];
      
      // With solutions - gradual impact over time
      const withSolutions = baseScenario.map((temp, index) => {
        const yearProgress = index / 4; // 0 to 1
        const impactAtYear = totalImpact * yearProgress;
        return temp - impactAtYear;
      });

      solutionsChart.data.datasets[1].data = withSolutions;
      solutionsChart.update();
    }

    function renderScenariosList() {
      const container = document.getElementById('scenarios-list');
      
      if (scenarios.length === 0) {
        container.innerHTML = '<p class="text-center text-gray-500 py-8">ChÆ°a cÃ³ ká»‹ch báº£n nÃ o. HÃ£y táº¡o ká»‹ch báº£n má»›i á»Ÿ tab MÃ´ phá»ng!</p>';
        return;
      }

      container.innerHTML = scenarios.map(scenario => {
        const date = new Date(scenario.created_at);
        const dateStr = date.toLocaleDateString('vi-VN');
        
        return `
          <div class="p-4 border border-gray-200 rounded-lg hover:shadow-md transition">
            <div class="flex justify-between items-start">
              <div class="flex-1">
                <h3 class="font-bold text-gray-800 text-lg">${scenario.scenario_name}</h3>
                <p class="text-sm text-gray-500 mt-1">Táº¡o ngÃ y: ${dateStr}</p>
                <div class="mt-3 grid grid-cols-3 gap-2 text-sm">
                  <div class="bg-yellow-50 p-2 rounded">
                    <span class="font-semibold">COâ‚‚:</span> ${scenario.co2_increase_rate}%/nÄƒm
                  </div>
                  <div class="bg-red-50 p-2 rounded">
                    <span class="font-semibold">Nhiá»‡t Ä‘á»™:</span> ${scenario.current_temp_anomaly}Â°C
                  </div>
                  <div class="bg-blue-50 p-2 rounded">
                    <span class="font-semibold">BÄƒng tan:</span> ${scenario.ice_melt_rate} mm/nÄƒm
                  </div>
                </div>
              </div>
              <button class="delete-scenario ml-4 px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-semibold rounded transition" data-id="${scenario.__backendId}">
                XÃ³a
              </button>
            </div>
          </div>
        `;
      }).join('');

      container.querySelectorAll('.delete-scenario').forEach(btn => {
        btn.addEventListener('click', async () => {
          const scenarioId = btn.dataset.id;
          const scenario = scenarios.find(s => s.__backendId === scenarioId);
          
          if (!scenario) return;

          btn.disabled = true;
          btn.textContent = 'Äang xÃ³a...';

          const result = await window.dataSdk.delete(scenario);

          if (!result.isOk) {
            btn.disabled = false;
            btn.textContent = 'XÃ³a';
            showToast('Lá»—i khi xÃ³a ká»‹ch báº£n', 'error');
          }
        });
      });
    }

    function loadQuizQuestion() {
      const question = quizQuestions[currentQuestionIndex];
      document.getElementById('quiz-question').textContent = `CÃ¢u há»i ${currentQuestionIndex + 1}: ${question.question}`;
      
      const optionsContainer = document.getElementById('quiz-options');
      optionsContainer.innerHTML = '';
      
      question.options.forEach((option, index) => {
        const button = document.createElement('button');
        button.className = 'quiz-option w-full text-left p-3 border-2 border-purple-300 rounded-lg hover:bg-purple-100 transition';
        button.textContent = `${String.fromCharCode(65 + index)}. ${option}`;
        button.dataset.index = index;
        
        button.addEventListener('click', () => handleAnswerClick(index, button));
        
        optionsContainer.appendChild(button);
      });
      
      updateQuizProgress();
    }

    function handleAnswerClick(selectedIndex, buttonElement) {
      if (selectedAnswer !== null) return; // Already answered
      
      selectedAnswer = selectedIndex;
      const question = quizQuestions[currentQuestionIndex];
      const isCorrect = selectedIndex === question.correct;
      
      if (isCorrect) {
        quizScore++;
        buttonElement.classList.remove('border-purple-300');
        buttonElement.classList.add('border-green-500', 'bg-green-100');
        showFeedback(true, question.explanation);
      } else {
        buttonElement.classList.remove('border-purple-300');
        buttonElement.classList.add('border-red-500', 'bg-red-100');
        
        // Show correct answer
        const correctButton = document.querySelectorAll('.quiz-option')[question.correct];
        correctButton.classList.add('border-green-500', 'bg-green-100');
        
        showFeedback(false, question.explanation);
      }
      
      // Disable all options
      document.querySelectorAll('.quiz-option').forEach(btn => {
        btn.disabled = true;
        btn.classList.remove('hover:bg-purple-100');
      });
      
      updateQuizProgress();
      document.getElementById('next-question').classList.remove('hidden');
    }

    function showFeedback(isCorrect, explanation) {
      const feedbackDiv = document.getElementById('quiz-feedback');
      const feedbackText = document.getElementById('feedback-text');
      const feedbackExplanation = document.getElementById('feedback-explanation');
      
      feedbackDiv.classList.remove('hidden', 'bg-green-100', 'bg-red-100');
      
      if (isCorrect) {
        feedbackDiv.classList.add('bg-green-100');
        feedbackText.textContent = 'âœ… ChÃ­nh xÃ¡c!';
        feedbackText.className = 'font-semibold mb-2 text-green-800';
      } else {
        feedbackDiv.classList.add('bg-red-100');
        feedbackText.textContent = 'âŒ KhÃ´ng chÃ­nh xÃ¡c';
        feedbackText.className = 'font-semibold mb-2 text-red-800';
      }
      
      feedbackExplanation.textContent = explanation;
    }

    function updateQuizProgress() {
      document.getElementById('quiz-progress').textContent = `${currentQuestionIndex + 1}/10`;
      document.getElementById('quiz-score').textContent = quizScore;
      
      const progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
      document.getElementById('quiz-progress-bar').style.width = `${progress}%`;
    }

    function showQuizResult() {
      document.getElementById('quiz-container').classList.add('hidden');
      document.getElementById('quiz-result').classList.remove('hidden');
      document.getElementById('final-score').textContent = quizScore;
      
      // Find achievement
      let achievement = achievements[0];
      for (let i = achievements.length - 1; i >= 0; i--) {
        if (quizScore >= achievements[i].minScore) {
          achievement = achievements[i];
          break;
        }
      }
      
      document.getElementById('achievement-icon').textContent = achievement.icon;
      document.getElementById('achievement-title').textContent = achievement.title;
      document.getElementById('achievement-desc').textContent = achievement.description;
    }

    function renderDictionary(searchQuery = '') {
      const container = document.getElementById('dictionary-list');
      const query = searchQuery.toLowerCase().trim();
      
      const filteredTerms = query === '' 
        ? dictionaryTerms 
        : dictionaryTerms.filter(term => 
            term.term.toLowerCase().includes(query) || 
            term.definition.toLowerCase().includes(query) ||
            term.category.toLowerCase().includes(query) ||
            term.details.toLowerCase().includes(query)
          );

      if (filteredTerms.length === 0) {
        container.innerHTML = '<p class="text-center text-gray-500 py-8">KhÃ´ng tÃ¬m th   y thuáº­t ngá»¯ nÃ o phÃ¹ há»£p.</p>';
        return;
      }

      // Group by category
      const grouped = {};
      filteredTerms.forEach(term => {
        if (!grouped[term.category]) {
          grouped[term.category] = [];
        }
        grouped[term.category].push(term);
      });

      let html = '';
      Object.keys(grouped).sort().forEach(category => {
        html += `
          <div class="mb-6">
            <h3 class="text-xl font-bold text-purple-700 mb-3 pb-2 border-b-2 border-purple-200">${category}</h3>
            <div class="space-y-3">
              ${grouped[category].map(term => `
                <div class="p-4 bg-gray-50 rounded-lg border-l-4 border-blue-500 hover:shadow-md transition">
                  <div class="flex items-start gap-3">
                    <span class="text-3xl">${term.icon}</span>
                    <div class="flex-1">
                      <h4 class="text-lg font-bold text-gray-800 mb-1">${term.term}</h4>
                      <p class="text-gray-700 mb-2">${term.definition}</p>
                      <p class="text-sm text-gray-600 leading-relaxed">${term.details}</p>
                    </div>
                  </div>
                </div>
              `).join('')}
            </div>
          </div>
        `;
      });

      container.innerHTML = html;
    }

    function updateFeedbackButtons() {
      const positiveBtn = document.getElementById('show-positive');
      const negativeBtn = document.getElementById('show-negative');
      
      if (currentFeedbackType === 'positive') {
        positiveBtn.classList.remove('bg-red-600', 'hover:bg-red-700');
        positiveBtn.classList.add('bg-red-700', 'ring-4', 'ring-red-300');
        negativeBtn.classList.remove('bg-blue-700', 'ring-4', 'ring-blue-300');
        negativeBtn.classList.add('bg-blue-600', 'hover:bg-blue-700');
      } else {
        negativeBtn.classList.remove('bg-blue-600', 'hover:bg-blue-700');
        negativeBtn.classList.add('bg-blue-700', 'ring-4', 'ring-blue-300');
        positiveBtn.classList.remove('bg-red-700', 'ring-4', 'ring-red-300');
        positiveBtn.classList.add('bg-red-600', 'hover:bg-red-700');
      }
    }

    function renderFeedbackLoops() {
      const container = document.getElementById('feedback-loops-container');
      const loops = currentFeedbackType === 'positive' ? positiveFeedbackLoops : negativeFeedbackLoops;
      
      const headerColor = currentFeedbackType === 'positive' ? 'bg-red-100 border-red-500' : 'bg-blue-100 border-blue-500';
      const headerTextColor = currentFeedbackType === 'positive' ? 'text-red-900' : 'text-blue-900';
      const loopBorderColor = currentFeedbackType === 'positive' ? 'border-red-300' : 'border-blue-300';
      
      let html = `
        <div class="mb-6 p-4 ${headerColor} border-l-4 rounded-r-lg">
          <h3 class="text-xl font-bold ${headerTextColor} mb-2">
            ${currentFeedbackType === 'positive' ? 'âš ï¸ Pháº£n há»“i DÆ°Æ¡ng (Positive Feedback)' : 'âœ… Pháº£n há»“i Ã‚m (Negative Feedback)'}
          </h3>
          <p class="text-sm ${headerTextColor}">
            ${currentFeedbackType === 'positive' 
              ? 'CÃ¡c vÃ²ng pháº£n há»“i tá»± tÄƒng cÆ°á»ng - lÃ m biáº¿n Ä‘á»•i khÃ­ háº­u nghiÃªm trá»ng hÆ¡n. ÄÃ¢y lÃ  lÃ½ do táº¡i sao pháº£i hÃ nh Ä‘á»™ng ngay!'
              : 'CÃ¡c v  ng pháº£n há»“i tá»± Ä‘iá»u chá»‰nh - giÃºp á»•n Ä‘á»‹nh khÃ­ háº­u. Tuy nhiÃªn, chÃºng cÃ³ giá»›i háº¡n vÃ  khÃ´ng Ä‘á»§ Ä‘á»ƒ ngÄƒn biáº¿n Ä‘á»•i khÃ­ háº­u do con ngÆ°á»i.'
            }
          </p>
        </div>
        <div class="space-y-4">
      `;
      
      loops.forEach(loop => {
        html += `
          <div class="p-4 bg-gradient-to-br from-white to-gray-50 rounded-xl border-2 ${loopBorderColor} shadow-md hover:shadow-lg transition">
            <div class="flex items-center gap-3 mb-3">
              <span class="text-4xl">${loop.icon}</span>
              <h3 class="text-xl font-bold text-gray-800">${loop.name}</h3>
            </div>
            
            <!-- Steps Flow -->
            <div class="mb-3 space-y-2">
              ${loop.steps.map((step, index) => `
                <div class="flex items-center gap-2">
                  <div class="flex-shrink-0 w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-sm font-bold">
                    ${index + 1}
                  </div>
                  <div class="flex-1 p-3 ${step.color} rounded-lg border border-gray-300 flex items-center gap-2">
                    <span class="text-xl">${step.icon}</span>
                    <span class="font-semibold">${step.text}</span>
                  </div>
                  ${index < loop.steps.length - 1 ? '<div class="flex-shrink-0 text-2xl text-gray-400">â†“</div>' : ''}
                </div>
                ${index === loop.steps.length - 1 && currentFeedbackType === 'positive' ? `
                  <div class="flex items-center justify-center">
                    <div class="text-3xl text-red-500 font-bold animate-pulse">ğŸ”„ â†»</div>
                  </div>
                  <div class="text-center text-sm font-bold text-red-600 mt-2">VÃ²ng láº·p láº·p láº¡i vÃ  tÄƒng cÆ°á»ng!</div>
                ` : ''}
                ${index === loop.steps.length - 1 && currentFeedbackType === 'negative' ? `
                  <div class="flex items-center justify-center mt-2">
                    <div class="text-2xl text-green-600 font-bold">âœ“ Há»‡ thá»‘ng á»•n Ä‘á»‹nh</div>
                  </div>
                ` : ''}
              `).join('')}
            </div>
            
            <!-- Description -->
            <div class="p-3 bg-white rounded-lg border border-gray-200 mb-2">
              <p class="text-gray-700 leading-relaxed text-sm">${loop.description}</p>
            </div>
            
            <!-- Metadata -->
            <div class="grid grid-cols-2 gap-2 mb-2">
              <div class="p-2 bg-purple-50 rounded border border-purple-200">
                <span class="text-xs font-semibold text-purple-700">TÃ¡c Ä‘á»™ng:</span>
                <span class="text-sm font-bold text-purple-900 ml-1">${loop.impact}</span>
              </div>
              <div class="p-2 bg-indigo-50 rounded border border-indigo-200">
                <span class="text-xs font-semibold text-indigo-700">Thá»i gian:</span>
                <span class="text-sm font-bold text-indigo-900 ml-1">${loop.timescale}</span>
              </div>
            </div>
            
            ${loop.note ? `
              <div class="p-3 bg-yellow-50 border-l-4 border-yellow-500 rounded-r">
                <p class="text-sm text-yellow-800">${loop.note}</p>
              </div>
            ` : ''}
          </div>
        `;
      });
      
      html += '</div>';
      container.innerHTML = html;
    }

    initializeApp();
    renderDictionary();
    renderFeedbackLoops();
    updateFeedbackButtons();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9af3c97464be043d',t:'MTc2NTk0Njg5My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>